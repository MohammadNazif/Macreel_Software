import{e as C,f as te}from"./chunk-6BGGINTD.js";import"./chunk-IPRCABXG.js";import{c as U,d as O,f as W,g as H,k as J,n as K,o as Q,v as X,w as Y,x as Z}from"./chunk-BVWMTXCI.js";import{a as ie}from"./chunk-K5FSVNLO.js";import{a as ee,b as w}from"./chunk-JLTNFPKW.js";import"./chunk-JNGLRRZQ.js";import{Da as d,Ga as T,Jb as V,K as x,Kb as B,Lb as G,Ma as i,Na as n,Oa as m,Pa as j,Pb as z,Qa as R,S as g,Sa as b,T as h,Ua as c,Va as p,ac as $,bc as _,cc as q,dc as M,eb as a,fb as D,gb as N,ma as s,qa as f,qb as P,ua as y,va as v,za as u}from"./chunk-QLDBBFLA.js";import{a as ae}from"./chunk-WLYQFBIK.js";import{a as F,b as A,d as re}from"./chunk-WIXLIC45.js";var k=re(ae());var S=class t{constructor(o,e,r){this.auth=o;this.fb=e;this.router=r}loginForm;errorMessage;ngOnInit(){this.loginForm=this.fb.group({username:["",O.required],password:["",O.required]})}onLogin(){if(this.loginForm.invalid){k.default.fire({icon:"warning",title:"Invalid Form",text:"Please enter username and password"});return}let o=this.loginForm.value;this.auth.login(o).subscribe({next:e=>{k.default.fire({icon:"success",title:"Login Successful",timer:1200,showConfirmButton:!1,didClose:()=>{let r=ee(e.data.token),l=r.role||r["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];if(!l){this.errorMessage.set("Role not found in token");return}this.auth.setRole(l),l=="admin"?this.router.navigate(["/home/admin"]):l=="employee"?this.router.navigate(["/home/employee"]):this.router.navigate(["/error"])}})},error:e=>{k.default.fire({icon:"error",title:"Login Failed",text:e?.error?.message||"Invalid username or password"})}})}static \u0275fac=function(e){return new(e||t)(f(w),f(X),f(_))};static \u0275cmp=y({type:t,selectors:[["app-login"]],standalone:!1,decls:31,vars:1,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-[#faf7fe]"],[1,"w-full","max-w-5xl","max-h-4xl","bg-white","rounded-2xl","shadow-xl","overflow-hidden","grid","grid-cols-1","md:grid-cols-2"],[1,"bg-[#faf7fe]"],[2,"padding","50px",3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-2","mb-10"],[1,"w-8","h-8","bg-[#bc1a31]","rounded-full","flex","items-center","justify-center","text-white","font-bold"],["src","assets/images/logo.png","alt","Macreel InfoSoft",1,"w-10","h-10","object-contain","rounded-xl"],[1,"font-semibold","text-gray-700"],[1,"text-3xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-400","mb-8"],[1,"mb-4"],["type","text","formControlName","username","placeholder","User Name",1,"w-full","px-4","py-3","rounded-lg","bg-gray-100","border","border-gray-300","focus:outline-none","focus:border-[#bc1a31]","focus:ring-2","focus:ring-[#bc1a31]"],["type","password","formControlName","password","placeholder","********",1,"w-full","px-4","py-3","rounded-lg","bg-gray-100","border","border-gray-300","focus:outline-none","focus:border-[#bc1a31]","focus:ring-2","focus:ring-[#bc1a31]"],[1,"flex","items-center","justify-between","mb-6","text-sm"],[1,"flex","items-center","gap-2","text-gray-500"],["type","checkbox",1,"accent-purple-600"],["href","#",1,"text-[#bc1a31]","hover:underline"],[1,"w-full","bg-[#bc1a31]","text-white","py-3","rounded-lg","font-semibold"],[1,"text-center","text-sm","text-gray-500","mt-6"],["href","#",1,"text-[#bc1a31]","font-medium"],[1,"hidden","md:flex","bg-[#faf7fe]","p-0"],["src","assets/images/laptopimage2.png","alt","Laptop",1,"w-full","h-full","object-cover"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),c("ngSubmit",function(){return r.onLogin()}),i(4,"div",4)(5,"div",5),m(6,"img",6),n(),i(7,"span",7),a(8,"Macreel Infosoft"),n()(),i(9,"h1",8),a(10," Welcome to login system "),n(),i(11,"p",9),a(12," Sign in by entering the information below "),n(),i(13,"div",10),m(14,"input",11),n(),i(15,"div",10),m(16,"input",12),n(),i(17,"div",13)(18,"label",14),m(19,"input",15),a(20," Remember me "),n(),i(21,"a",16),a(22," Forgot Password? "),n()(),i(23,"button",17),a(24," Login "),n(),i(25,"p",18),a(26," Don\u2019t have an account? "),i(27,"a",19),a(28,"Sign up"),n()()()(),i(29,"div",20),m(30,"img",21),n()()()),e&2&&(s(3),d("formGroup",r.loginForm))},dependencies:[J,U,W,H,K,Q],encapsulation:2})};var de=(t,o)=>({"w-[265px] translate-x-0":t,"w-[72px] -translate-x-full md:translate-x-0 md:w-[72px]":o});function ce(t,o){if(t&1){let e=b();i(0,"div",22),c("click",function(){g(e);let l=p();return h(l.closeSidebarOnMobile())}),n()}}function pe(t,o){t&1&&(i(0,"span",23),a(1," Macreel InfoSoft "),n())}function ue(t,o){t&1&&(i(0,"span"),a(1,"Dashboard"),n())}function fe(t,o){if(t&1&&(i(0,"span"),a(1),n()),t&2){let e=p().$implicit;s(),D(e.label)}}function ge(t,o){if(t&1&&(i(0,"span",27),m(1,"i",28),n()),t&2){let e=p().$implicit,r=p();d("ngClass",r.openMenu===e.key?"rotate-90":"")}}function he(t,o){if(t&1){let e=b();i(0,"a",31),c("click",function(){g(e);let l=p(3);return h(l.closeSidebarOnMobile())}),a(1),n()}if(t&2){let e=o.$implicit;d("routerLink",e.route),s(),N(" ",e.label," ")}}function be(t,o){if(t&1&&(i(0,"div",29),u(1,he,2,2,"a",30),n()),t&2){let e=p().$implicit;s(),d("ngForOf",e.children)}}function xe(t,o){if(t&1){let e=b();j(0),i(1,"div",24),c("click",function(){let l=g(e).$implicit,oe=p();return h(oe.toggleMenu(l.key))}),i(2,"div",12),m(3,"i"),u(4,fe,2,1,"span",8),n(),u(5,ge,2,1,"span",25),n(),u(6,be,2,1,"div",26),R()}if(t&2){let e=o.$implicit,r=p();s(3),T(e.icon),s(),d("ngIf",r.sidebarOpen),s(),d("ngIf",r.sidebarOpen),s(),d("ngIf",r.openMenu===e.key&&r.sidebarOpen)}}function ye(t,o){if(t&1){let e=b();i(0,"div",32)(1,"div",33),m(2,"i",34),a(3," Profile "),n(),i(4,"button",35),c("click",function(){g(e);let l=p();return h(l.goToChangePassword())}),m(5,"i",36),a(6," Change Password "),n(),i(7,"button",35),c("click",function(){g(e);let l=p();return h(l.logout())}),m(8,"i",37),a(9," Logout "),n()()}}var E=class t{constructor(o,e){this.auth=o;this.router=e}sidebarOpen=!0;isMobile=!1;openMenu=null;currentRole="";profileOpen=!1;menus=[{label:"Master",icon:"fas fa-id-card",key:"master",roles:["admin"],children:[{label:"Add Role",route:"/home/admin/master/add-role",roles:["admin"]},{label:"Add Designation",route:"/home/admin/master/add-designation",roles:["admin"]},{label:"Add Department",route:"/home/admin/master/add-department",roles:["admin"]},{label:"Add Technology",route:"/home/admin/master/add-technology",roles:["admin"]},{label:"Add Leave",route:"/home/admin/master/add-leave",roles:["admin"]},{label:"Add Page",route:"/home/admin/master/add-pages",roles:["admin"]}]},{label:"Employee Management",icon:"fa-solid fa-users",key:"employee",roles:["admin"],children:[{label:"Add Employee",route:"/home/add-employee",roles:["admin"]},{label:"Employee List",route:"/home/admin/employee-list",roles:["admin"]}]},{label:"Leave Management",icon:"fas fa-id-card",key:"leave",roles:["admin","employee"],children:[{label:"Assign Leave",route:"/home/admin/assign-leave",roles:["admin"]},{label:"Assigned Leaves",route:"/home/admin/assigned-employees-leaves",roles:["admin"]},{label:"Leave Request",route:"/home/admin/leave-requests",roles:["admin"]},{label:"Apply Leave",route:"/home/employee/apply-leave",roles:["employee"]},{label:"Assigned Leave",route:"/home/employee/assigned-leaves",roles:["employee"]}]},{label:"Attendance Management",icon:"fa-solid fa-calendar-check",key:"attendance",roles:["admin"],children:[{label:"Upload Attendance",route:"/home/admin/upload-attendance",roles:["admin"]},{label:"View Attendance",route:"/home/admin/view-attendance",roles:["admin"]}]},{label:"Task Management",icon:"fa-solid fa-tasks",key:"task",roles:["admin","employee"],children:[{label:"Add Task",route:"/home/admin/add-task",roles:["admin"]},{label:"Task List",route:"/home/admin/view-task",roles:["admin"]},{label:"Assigned Tasks",route:"/home/employee/assigned-tasks",roles:["employee"]},{label:"Assigned Projects",route:"/home/employee/assign-project",roles:["employee"]}]},{label:"Project Management",icon:"fa-solid fa-tasks",key:"project",roles:["admin"],children:[{label:"Add Project",route:"/home/admin/add-project",roles:["admin"]},{label:"View Project",route:"/home/admin/view-project",roles:["admin"]}]}];get filteredMenus(){return this.menus.filter(o=>o.roles.includes(this.currentRole)).map(o=>A(F({},o),{children:o.children?.filter(e=>!e.roles||e.roles.includes(this.currentRole))}))}ngOnInit(){this.currentRole=this.auth.getRole(),this.checkScreen(),window.addEventListener("resize",()=>this.checkScreen())}checkScreen(){this.isMobile=window.innerWidth<768,this.isMobile&&(this.sidebarOpen=!1)}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}toggleMenu(o){this.openMenu=this.openMenu===o?null:o}closeSidebarOnMobile(){this.isMobile&&(this.sidebarOpen=!1)}toggleProfileMenu(){this.profileOpen=!this.profileOpen}goToChangePassword(){this.profileOpen=!1,this.router.navigate(["/home/change-password"])}logout(){this.profileOpen=!1,this.auth.logout().subscribe(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(e){return new(e||t)(f(w),f(_))};static \u0275cmp=y({type:t,selectors:[["app-layout"]],standalone:!1,decls:30,vars:9,consts:[[1,"flex","h-screen","bg-[#f6f7fb]","overflow-hidden"],["class","fixed inset-0 bg-black/40 z-30 md:hidden",3,"click",4,"ngIf"],[1,"bg-white","shadow-lg","z-40","h-full","transition-all","duration-300","fixed","md:relative",3,"ngClass"],[1,"flex","items-center","gap-3","px-4","py-3","border-b"],["src","assets/images/logo.png",1,"w-10","h-10","rounded-xl"],["class","text-lg font-bold whitespace-nowrap",4,"ngIf"],[1,"mt-4","px-3","text-[13px]","font-medium","text-[#7E7E7E]","space-y-1"],["routerLink","/home/employee/dashboard",1,"flex","items-center","gap-3","p-2","rounded-lg","cursor-pointer","hover:bg-[#FDECEA]",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex-1","flex","flex-col"],[1,"bg-white","shadow-sm","px-3","py-2","flex","justify-between","items-center"],[1,"flex","items-center","gap-3"],[1,"text-2xl","text-[#E6354B]","p-2","rounded-lg",3,"click"],[1,"text-lg","md:text-xl","font-semibold"],[1,"w-9","h-9","flex","items-center","justify-center","bg-[#FDECEA]","rounded-xl"],[1,"fa-solid","fa-bell","text-[#E6354B]"],[1,"fa-regular","fa-message","text-[#E6354B]"],[1,"relative"],["src","https://i.pravatar.cc/40",1,"w-9","h-9","rounded-full","cursor-pointer","border-2","border-[#E6354B]",3,"click"],["class","absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-xl text-sm z-50 overflow-hidden",4,"ngIf"],[1,"flex-1","overflow-auto","bg-[#f6f7fb]"],[1,"fixed","inset-0","bg-black/40","z-30","md:hidden",3,"click"],[1,"text-lg","font-bold","whitespace-nowrap"],[1,"flex","items-center","p-2","justify-between","rounded-lg","cursor-pointer","hover:bg-[#FDECEA]",3,"click"],["class","transition-transform",3,"ngClass",4,"ngIf"],["class","ml-10 space-y-1 text-sm",4,"ngIf"],[1,"transition-transform",3,"ngClass"],[1,"fa-solid","fa-chevron-right"],[1,"ml-10","space-y-1","text-sm"],["class","block p-2 hover:text-[#E6354B]",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"block","p-2","hover:text-[#E6354B]",3,"click","routerLink"],[1,"absolute","right-0","mt-2","w-48","bg-white","shadow-lg","rounded-xl","text-sm","z-50","overflow-hidden"],[1,"px-4","py-2","border-b","font-semibold","text-[#333]"],[1,"fa-solid","fa-user","mr-2"],[1,"w-full","text-left","px-4","py-2","hover:bg-[#FDECEA]",3,"click"],[1,"fa-solid","fa-key","text-[#E6354B]","mr-2"],[1,"fa-solid","fa-right-from-bracket","text-[#E6354B]","mr-2"]],template:function(e,r){e&1&&(i(0,"div",0),u(1,ce,1,0,"div",1),i(2,"aside",2)(3,"div",3),m(4,"img",4),u(5,pe,2,0,"span",5),n(),i(6,"nav",6)(7,"div",7),c("click",function(){return r.closeSidebarOnMobile()}),i(8,"span"),a(9,"\u{1F3E0}"),n(),u(10,ue,2,0,"span",8),n(),i(11,"div"),u(12,xe,7,5,"ng-container",9),n()()(),i(13,"div",10)(14,"header",11)(15,"div",12)(16,"button",13),c("click",function(){return r.toggleSidebar()}),a(17," \u2630 "),n(),i(18,"h1",14),a(19,"Dashboard"),n()(),i(20,"div",12)(21,"div",15),m(22,"i",16),n(),i(23,"div",15),m(24,"i",17),n(),i(25,"div",18)(26,"img",19),c("click",function(){return r.toggleProfileMenu()}),n(),u(27,ye,10,0,"div",20),n()()(),i(28,"main",21),m(29,"router-outlet"),n()()()),e&2&&(s(),d("ngIf",r.sidebarOpen&&r.isMobile),s(),d("ngClass",P(6,de,r.sidebarOpen,!r.sidebarOpen)),s(3),d("ngIf",r.sidebarOpen),s(5),d("ngIf",r.sidebarOpen),s(2),d("ngForOf",r.filteredMenus),s(15),d("ngIf",r.profileOpen))},dependencies:[V,B,G,$,q],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:10px}"]})};var ve=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:S},{path:"employee-registration",component:C},{path:"home",component:E,canActivate:[ie],children:[{path:"",loadChildren:()=>import("./chunk-OSNTYWP2.js").then(t=>t.PagesModule)},{path:"add-employee",component:C},{path:"employee-profile",component:te},{path:"edit-employee/:id",component:C}]}],L=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=x({imports:[M.forChild(ve),M]})};var ne=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=x({imports:[z,L,Y,Z]})};export{ne as AuthModule};
