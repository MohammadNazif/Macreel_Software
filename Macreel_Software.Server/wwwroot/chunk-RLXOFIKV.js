import{a as Rt,b as Bt}from"./chunk-4WCWKFVZ.js";import{a as jt,b as _e,c as qt,d as Ut}from"./chunk-VGFH5LQK.js";import{a as zt,b as Re}from"./chunk-NRWGWTND.js";import{a as ie,b as ne,c as ae,d as oe,e as re,f as le,g as me,h as se,i as de,j as pe,k as Pt,l as ce,m as Nt,n as Ot,o as F,p as Vt,q as Se}from"./chunk-FMZWSWE5.js";import"./chunk-ISXDYVSX.js";import{a as be,b as At,e as Lt}from"./chunk-6BGGINTD.js";import"./chunk-IPRCABXG.js";import{b as Ve,c as M,d as E,f as D,g as A,i as ot,j as Dt,k as L,l as Ft,m as It,n as P,o as j,p as W,q as z,r as q,v as N,w as kt,x as Mt}from"./chunk-BVWMTXCI.js";import{a as te}from"./chunk-JNGLRRZQ.js";import{$a as V,Da as d,J as Q,Jb as St,K as Ae,Kb as I,Lb as k,M as J,Ma as i,Na as n,Nb as K,Oa as s,Ob as _t,Pa as b,Pb as Ct,Qa as S,S as x,Sa as w,T as h,Tb as wt,U as ut,Ua as g,Ub as Et,Va as f,Vb as X,Ya as xt,_a as O,_b as Tt,ab as R,bc as Z,db as fe,dc as at,eb as r,fb as u,gb as v,hb as ht,ib as vt,jb as Pe,k as ct,ka as De,kb as je,la as ft,lb as Ne,ma as l,ob as Y,qa as y,qb as yt,tb as B,u as ve,ua as C,ub as bt,va as Le,vb as $,wb as Oe,x as ye,xa as gt,za as p}from"./chunk-QLDBBFLA.js";import{a as ee}from"./chunk-WLYQFBIK.js";import{a as ke,b as Me,d as G,g as he}from"./chunk-WIXLIC45.js";var Be=class a{sidebarOpen=!0;toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["app-employee-task-sheet"]],standalone:!1,decls:51,vars:0,consts:[["id","page-wrapper",1,"w-full","min-h-screen","bg-[#f6f7fb]","p-6"],["id","daily-task-card",1,"w-full","bg-white","rounded-xl","shadow-md","border","border-gray-200"],["id","daily-task-header",1,"flex","flex-wrap","items-center","justify-between","gap-4","px-6","py-4","border-b"],[1,"text-lg","font-semibold","text-[#E6354B]"],["id","filter-section",1,"flex","flex-wrap","items-center","gap-3"],[1,"h-10","px-3","border","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#E6354B]","min-w-[200px]"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","0"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["type","date",1,"h-10","px-3","border","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#E6354B]","min-w-[100px]"],[1,"h-10","px-4","bg-[#E6354B]","text-[white]","font-medium","rounded-md","transition","min-w-[100px]"],["id","daily-task-body",1,"p-6","min-h-[300px]"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),r(4," Daily Task Report "),n(),i(5,"div",4)(6,"select",5)(7,"option",6),r(8,"--Select Employee--"),n(),i(9,"option",6),r(10,"Manish Tyagi"),n(),i(11,"option",7),r(12,"Priyanka"),n(),i(13,"option",8),r(14,"Ankit"),n(),i(15,"option",9),r(16,"Himanshu"),n(),i(17,"option",10),r(18,"Simran"),n()(),i(19,"select",5)(20,"option",11),r(21,"--Select Month--"),n(),i(22,"option",6),r(23,"January"),n(),i(24,"option",7),r(25,"February"),n(),i(26,"option",8),r(27,"March"),n(),i(28,"option",9),r(29,"April"),n(),i(30,"option",10),r(31,"May"),n(),i(32,"option",12),r(33,"June"),n(),i(34,"option",13),r(35,"July"),n(),i(36,"option",14),r(37,"August"),n(),i(38,"option",15),r(39,"September"),n(),i(40,"option",16),r(41,"October"),n(),i(42,"option",17),r(43,"November"),n(),i(44,"option",18),r(45,"December"),n()(),s(46,"input",19)(47,"input",19),i(48,"button",20),r(49," Export to Excel "),n()()(),s(50,"div",21),n()())},dependencies:[z,q],encapsulation:2})};var ze=class a{constructor(e){this.dashboardService=e}isLoading=!0;ngOnInit(){this.getAdminDashboardCount()}dashboardCount={totalProjects:0,ongoingProjects:0,totalEmployees:0,absentEmployee:0,totalTasks:0,completedTask:0,leaveRequest:0,upcomingLeaves:0};getAdminDashboardCount(){this.dashboardService.getAdminDashboardCount().subscribe({next:e=>{this.dashboardCount=e.data[0],console.log("Admin dash count",this.dashboardCount),this.isLoading=!1},error:()=>this.isLoading=!1})}static \u0275fac=function(t){return new(t||a)(y(zt))};static \u0275cmp=C({type:a,selectors:[["app-dashboard"]],standalone:!1,decls:143,vars:8,consts:[[1,"content","pt-3","px-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-3","mb-6"],[1,"bg-white","rounded-lg","shadow-md","p-3","flex","justify-between","items-start","relative","group","overflow-hidden","transition-all","duration-300","hover:-translate-y-1","hover:shadow-xl"],[1,"font-semibold","text-gray-700","mb-1.5"],[1,"text-sm","text-gray-600","hover:text-blue-500","cursor-pointer","transition-colors","duration-300"],["href","/home/admin/view-project",1,"hover:text-indigo-600","cursor-pointer"],[1,"font-medium"],[1,"text-blue-500","text-3xl","p-3"],[1,"fa-solid","fa-diagram-project"],[1,"absolute","bottom-0","left-0","h-1","bg-blue-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","transition-colors","duration-300"],["href","/home/admin/employee-list",1,"hover:text-indigo-600","cursor-pointer"],[1,"text-sm","text-gray-600","hover:text-indigo-600","cursor-pointer","transition-colors","duration-300"],[1,"text-indigo-600","text-3xl","p-3"],[1,"fa-solid","fa-user"],[1,"absolute","bottom-0","left-0","h-1","bg-indigo-600","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-orange-500","cursor-pointer","transition-colors","duration-300"],["href","/home/admin/leave-requests",1,"hover:text-indigo-600","cursor-pointer"],[1,"text-orange-500","text-3xl","p-3"],[1,"fa-solid","fa-calendar-days"],[1,"absolute","bottom-0","left-0","h-1","bg-orange-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-purple-500","cursor-pointer","transition-colors","duration-300"],["href","/home/admin/view-task",1,"hover:text-indigo-600","cursor-pointer"],[1,"text-purple-500","text-3xl","p-3"],[1,"fa-solid","fa-tasks"],[1,"absolute","bottom-0","left-0","h-1","bg-purple-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-green-500","cursor-pointer","transition-colors","duration-300"],[1,"text-green-500","text-3xl","p-3"],[1,"fas","fa-money-bill-trend-up"],[1,"absolute","bottom-0","left-0","h-1","bg-green-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-teal-500","cursor-pointer","transition-colors","duration-300"],[1,"text-teal-500","text-3xl","p-3"],[1,"fa-solid","fa-user-check"],[1,"absolute","bottom-0","left-0","h-1","bg-teal-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-indigo-500","cursor-pointer","transition-colors","duration-300"],[1,"text-indigo-500","text-3xl","p-3"],[1,"fa-solid","fa-user-gear"],[1,"absolute","bottom-0","left-0","h-1","bg-indigo-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"text-sm","text-gray-600","hover:text-red-500","cursor-pointer","transition-colors","duration-300"],[1,"text-red-500","text-3xl","p-3"],[1,"fas","fa-basket-shopping"],[1,"absolute","bottom-0","left-0","h-1","bg-red-500","w-0","group-hover:w-full","transition-all","duration-500"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-5"],[1,"lg:col-span-8","grid","grid-cols-1","md:grid-cols-2","gap-5"],[1,"bg-white","rounded-2xl","p-5","hover:shadow-xl","transition-all","duration-300",2,"box-shadow","rgba(0, 0, 0, 0.04) 0px 4px 20px 0px, rgba(0, 0, 0, 0.03) 0px 0px 0px 1px"],[1,"font-semibold","text-gray-700","mb-4","text-lg"],[1,"h-48"],["id","projectStatusChart",1,"w-full","h-full"],["id","taskStatusChart",1,"w-full","h-full"],[1,"lg:col-span-4","space-y-4"],[1,"bg-white","rounded-2xl","p-5","h-full","flex","flex-col","justify-start","hover:shadow-xl","transition-all","duration-300",2,"box-shadow","rgba(0, 0, 0, 0.04) 0px 4px 20px 0px, rgba(0, 0, 0, 0.03) 0px 0px 0px 1px"],[1,"space-y-3"],["href","/home/add-employee",1,"block","bg-gradient-to-r","from-blue-500","to-indigo-600","hover:from-blue-600","hover:to-indigo-700","text-white","text-center","py-3","rounded-lg","transition-all","duration-300","shadow-md","hover:shadow-lg","transform","hover:translate-y-[-2px]"],["href","/home/admin/add-project",1,"block","bg-gradient-to-r","from-emerald-500","to-green-600","hover:from-emerald-600","hover:to-green-700","text-white","text-center","py-3","rounded-lg","transition-all","duration-300","shadow-md","hover:shadow-lg","transform","hover:translate-y-[-2px]"],[1,"relative"],["id","taskReportDropdown",1,"w-full","bg-gradient-to-r","from-cyan-500","to-blue-600","hover:from-cyan-600","hover:to-blue-700","text-white","py-3","rounded-lg","transition-all","duration-300","shadow-md","hover:shadow-lg","transform","hover:translate-y-[-2px]"],["id","taskReportMenu",1,"absolute","left-0","mt-2","w-full","bg-white","border","rounded-xl","shadow-xl","hidden","z-10","overflow-hidden"],["href","/admin/Task_reports?status=Pending",1,"block","px-4","py-3","hover:bg-gray-50","transition-colors","duration-200","border-b"],["href","/admin/Task_reports?status=Completed",1,"block","px-4","py-3","hover:bg-gray-50","transition-colors","duration-200"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3",3),r(5,"Project"),n(),i(6,"p",4)(7,"a",5),r(8," Total Project : "),i(9,"span",6),r(10),n()()(),i(11,"p",4)(12,"a",5),r(13),n()()(),i(14,"div",7),s(15,"i",8),n(),s(16,"span",9),n(),i(17,"div",2)(18,"div")(19,"h3",3),r(20,"Employee"),n(),i(21,"p",10)(22,"a",11),r(23," Total Employee : "),i(24,"span",6),r(25),n()()(),i(26,"p",12)(27,"a",11),r(28),n()()(),i(29,"div",13),s(30,"i",14),n(),s(31,"span",15),n(),i(32,"div",2)(33,"div")(34,"h3",3),r(35,"Leave"),n(),i(36,"p",16)(37,"a",17),r(38," Upcoming : "),i(39,"span",6),r(40),n()()(),i(41,"p",16)(42,"a",17),r(43),n()()(),i(44,"div",18),s(45,"i",19),n(),s(46,"span",20),n(),i(47,"div",2)(48,"div")(49,"h3",3),r(50,"Task"),n(),i(51,"p",21)(52,"a",22),r(53," Total Task : "),i(54,"span",6),r(55),n()()(),i(56,"p",21)(57,"a",22),r(58),n()()(),i(59,"div",23),s(60,"i",24),n(),s(61,"span",25),n(),i(62,"div",2)(63,"div")(64,"h3",3),r(65,"Financial Summary"),n(),i(66,"p",26),r(67," Total Revenue : "),i(68,"span",6),r(69,"0"),n()(),i(70,"p",26),r(71," Total Purchase : 0 "),n()(),i(72,"div",27),s(73,"i",28),n(),s(74,"span",29),n(),i(75,"div",2)(76,"div")(77,"h3",3),r(78,"Reports"),n(),i(79,"p",30),r(80," Payments Report : "),i(81,"span",6),r(82,"0"),n()(),i(83,"p",30),r(84," Attendance Report : 0 "),n()(),i(85,"div",31),s(86,"i",32),n(),s(87,"span",33),n(),i(88,"div",2)(89,"div")(90,"h3",3),r(91,"Reports"),n(),i(92,"p",34),r(93," Mid Year Report : "),i(94,"span",6),r(95,"0"),n()(),i(96,"p",34),r(97," One-On-One Report : 0 "),n()(),i(98,"div",35),s(99,"i",36),n(),s(100,"span",37),n(),i(101,"div",2)(102,"div")(103,"h3",3),r(104,"Pin Login"),n(),i(105,"p",38),r(106," Pin Login Report : "),i(107,"span",6),r(108,"0"),n()()(),i(109,"div",39),s(110,"i",40),n(),s(111,"span",41),n()(),i(112,"div",42)(113,"div",43)(114,"div",44)(115,"h5",45),r(116,"Project Status Overview"),n(),i(117,"div",46),s(118,"canvas",47),n()(),i(119,"div",44)(120,"h5",45),r(121,"Task Status Overview"),n(),i(122,"div",46),s(123,"canvas",48),n()()(),i(124,"div",49)(125,"div",50)(126,"h5",45),r(127,"Quick Actions"),n(),i(128,"div",51)(129,"a",52),r(130," Add New Employee "),n(),i(131,"a",53),r(132," Create Project "),n(),i(133,"div",54)(134,"button",55),r(135," Task Report "),n(),i(136,"ul",56)(137,"li")(138,"a",57),r(139,"Pending Tasks (0)"),n()(),i(140,"li")(141,"a",58),r(142,"Completed Tasks (0)"),n()()()()()()()()()),t&2&&(l(10),v("",o.dashboardCount.totalProjects," "),l(3),v(" Ongoing :",o.dashboardCount.ongoingProjects||0," "),l(12),u(o.dashboardCount.totalEmployees||0),l(3),v(" Absent : ",o.dashboardCount.absentEmployee||0," "),l(12),u(o.dashboardCount.upcomingLeaves||0),l(3),v(" Request : ",o.dashboardCount.leaveRequest||0," "),l(12),u(o.dashboardCount.totalTasks||0),l(3),v(" Complete Task : ",o.dashboardCount.completedTask||0," "))},styles:[".card-item[_ngcontent-%COMP%]{box-shadow:#0000000a 0 4px 20px,#00000008 0 0 0 1px}"]})};var Fe=G(ee());var Yt=()=>[20,50,100];function Kt(a,e){a&1&&(i(0,"th",30),r(1," Sr No. "),n())}function Xt(a,e){if(a&1&&(i(0,"td",31),r(1),n()),a&2){let t=e.index,o=f();l(),v(" ",t+1+o.pageIndex*o.pageSize," ")}}function Zt(a,e){a&1&&(i(0,"th",32),r(1," Emp Code "),n())}function ei(a,e){if(a&1&&(i(0,"td",33),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.empCode," ")}}function ti(a,e){a&1&&(i(0,"th",34),r(1," Name "),n())}function ii(a,e){if(a&1&&(i(0,"td",33),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.empName," ")}}function ni(a,e){a&1&&(i(0,"th",35),r(1," Designation "),n())}function ai(a,e){if(a&1&&(i(0,"td",33),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.designationName," ")}}function oi(a,e){a&1&&(i(0,"th",35),r(1," Email "),n())}function ri(a,e){if(a&1&&(i(0,"td",33),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.emailId," ")}}function li(a,e){a&1&&(i(0,"th",35),r(1," Contact "),n())}function mi(a,e){if(a&1&&(i(0,"td",33),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.mobile," ")}}function si(a,e){a&1&&(i(0,"th",36),r(1," Action "),n())}function di(a,e){if(a&1){let t=w();i(0,"td",37)(1,"button",38),g("click",function(){let m=x(t).$implicit,c=f();return h(c.editEmployee(m))}),s(2,"i",39),n(),i(3,"button",40),g("click",function(){let m=x(t).$implicit,c=f();return h(c.deleteEmployee(m.id))}),s(4,"i",41),n()()}}function pi(a,e){a&1&&s(0,"tr",42)}function ci(a,e){a&1&&s(0,"tr",43)}var qe=class a{constructor(e,t){this.employeeService=e;this.router=t}displayedColumns=["srNo","empCode","empName","designationName","empEmail","Contact","action"];dataSource=new ce([]);totalRecords=0;pageSize=20;pageIndex=0;searchText="";paginator;editEmployee(e){this.router.navigate(["/home/edit-employee",e.id])}ngOnInit(){this.getEmployees()}getEmployees(e=1,t=this.pageSize,o=this.searchText){this.employeeService.getAllEmployees(e,t,o).subscribe(m=>{m.success&&(this.dataSource.data=m.data,this.totalRecords=m.totalRecords||m.data.length,this.dataSource.paginator=this.paginator)},m=>{console.error("Error fetching employees",m)})}applyFilter(e){this.searchText=e.target.value.trim(),this.pageIndex=0,this.getEmployees(1,this.pageSize,this.searchText)}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getEmployees(this.pageIndex+1,this.pageSize,this.searchText)}deleteEmployee(e){Fe.default.fire({title:"Are you sure?",text:"This employee will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#C5192F",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&this.employeeService.deleteDepartmentById(e).subscribe({next:o=>{o.status===!0?Fe.default.fire({title:"Deleted!",text:o.message||"Employee deleted successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()}):Fe.default.fire("Error",o.message||"Delete failed","error")},error:()=>{Fe.default.fire("Error","Something went wrong!","error")}})})}static \u0275fac=function(t){return new(t||a)(y(be),y(Z))};static \u0275cmp=C({type:a,selectors:[["app-employee-list"]],viewQuery:function(t,o){if(t&1&&O(F,5),t&2){let m;V(m=R())&&(o.paginator=m.first)}},standalone:!1,decls:35,vars:7,consts:[[1,"content","px-3","py-2"],[1,"bg-white","shadow","rounded-lg","p-1"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-2","mb-1"],[1,"ml-2","text-lg","md:text-[16px]","font-semibold","text-[#444]","text-center","md:text-left"],[1,"flex","items-center","gap-2"],[1,"relative"],["type","text","placeholder","Search Employee",1,"w-full","pl-10","pr-3","py-[6px]","text-[12px]","rounded-lg","bg-[#F6F7FB]","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]","table-search",3,"keyup"],[1,"fa-solid","fa-magnifying-glass","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","text-sm"],["showFirstLastButtons","",3,"page","pageSizeOptions","pageSize","length"],[1,"relative","overflow-x-auto","w-full"],["mat-table","",1,"min-w-[900px]","w-full","border","border-gray-300","divide-y","divide-gray-300","table-fixed","text-sm","md:text-base",3,"dataSource"],["matColumnDef","srNo"],["mat-header-cell","","class","w-[70px] text-[14px] px-1 py-1 text-center !bg-[#dd3d4f] text-white  whitespace-nowrap",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-center  text-[12px]",4,"matCellDef"],["matColumnDef","empCode"],["mat-header-cell","","class","min-w-[100px] px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1  text-[12px]",4,"matCellDef"],["matColumnDef","empName"],["mat-header-cell","","class","min-w-[180px] px-1 py-1 !bg-[#dd3d4f] text-white  text-[14px]",4,"matHeaderCellDef"],["matColumnDef","designationName"],["mat-header-cell","","class","min-w-[150px] px-1 py-1 !bg-[#dd3d4f] text-white  text-[14px]",4,"matHeaderCellDef"],["matColumnDef","empEmail"],["mat-header-cell","","class","min-w-[150px] px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-[12px]",4,"matCellDef"],["matColumnDef","Contact"],["matColumnDef","action"],["mat-header-cell","","class","w-[120px] px-1 py-1 text-center !bg-[#dd3d4f] text-white text-[14px]",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-center",4,"matCellDef"],["mat-header-row","","class","!h-9",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-100 !h-9",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"w-[70px]","text-[14px]","px-1","py-1","text-center","!bg-[#dd3d4f]","text-white","whitespace-nowrap"],["mat-cell","",1,"px-1","py-1","text-center","text-[12px]"],["mat-header-cell","",1,"min-w-[100px]","px-1","py-1","!bg-[#dd3d4f]","text-white","text-[14px]"],["mat-cell","",1,"px-1","py-1","text-[12px]"],["mat-header-cell","",1,"min-w-[180px]","px-1","py-1","!bg-[#dd3d4f]","text-white","text-[14px]"],["mat-header-cell","",1,"min-w-[150px]","px-1","py-1","!bg-[#dd3d4f]","text-white","text-[14px]"],["mat-header-cell","",1,"w-[120px]","px-1","py-1","text-center","!bg-[#dd3d4f]","text-white","text-[14px]"],["mat-cell","",1,"px-1","py-1","text-center"],[1,"text-green-700","p-2","rounded-full","hover:bg-green-100","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"text-red-500","p-2","rounded-full","hover:bg-red-100",3,"click"],[1,"fa","fa-trash"],["mat-header-row","",1,"!h-9"],["mat-row","",1,"hover:bg-gray-100","!h-9"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4," Employee List "),n(),i(5,"div",4)(6,"div",5)(7,"input",6),g("keyup",function(c){return o.applyFilter(c)}),n(),s(8,"i",7),n(),i(9,"mat-paginator",8),g("page",function(c){return o.onPageChange(c)}),n()()(),i(10,"div",9)(11,"table",10),b(12,11),p(13,Kt,2,0,"th",12)(14,Xt,2,1,"td",13),S(),b(15,14),p(16,Zt,2,0,"th",15)(17,ei,2,1,"td",16),S(),b(18,17),p(19,ti,2,0,"th",18)(20,ii,2,1,"td",16),S(),b(21,19),p(22,ni,2,0,"th",20)(23,ai,2,1,"td",16),S(),b(24,21),p(25,oi,2,0,"th",22)(26,ri,2,1,"td",23),S(),b(27,24),p(28,li,2,0,"th",22)(29,mi,2,1,"td",23),S(),b(30,25),p(31,si,2,0,"th",26)(32,di,5,0,"td",27),S(),p(33,pi,1,0,"tr",28)(34,ci,1,0,"tr",29),n()()()()),t&2&&(l(9),d("pageSizeOptions",Y(6,Yt))("pageSize",o.pageSize)("length",o.totalRecords),l(2),d("dataSource",o.dataSource),l(22),d("matHeaderRowDef",o.displayedColumns),l(),d("matRowDefColumns",o.displayedColumns))},dependencies:[ie,ae,me,oe,ne,se,re,le,de,pe,F],styles:[".mat-mdc-paginator-page-size-label{display:none!important}  .mat-mdc-paginator-range-label{display:none!important}  .mat-mdc-paginator-page-size-select{width:65px!important;min-width:45px!important}  .mat-mdc-select-trigger{height:8px!important;font-size:12px!important;padding-top:0!important;padding-bottom:0!important}  .mat-mdc-paginator-container{min-height:30px!important;padding:0 8px!important}.mdc-notched-outline[_ngcontent-%COMP%]{height:35px!important}.mat-mdc-paginator-touch-target[_ngcontent-%COMP%]{height:30px!important}.mat-mdc-form-field-flex[_ngcontent-%COMP%]{height:30px!important;align-items:center!important}"]})};var Ce=G(ee());var ui=()=>[10,25,50];function fi(a,e){if(a&1&&(i(0,"option",9),r(1),n()),a&2){let t=e.$implicit;d("ngValue",t.id),l(),v(" ",t.empName," ")}}function gi(a,e){if(a&1&&(i(0,"div",13)(1,"h6",14),r(2," Employee Details "),n(),i(3,"div",15)(4,"div")(5,"strong"),r(6,"Employee Code:"),n(),r(7),n(),i(8,"div")(9,"strong"),r(10,"Designation:"),n(),r(11),n(),i(12,"div")(13,"strong"),r(14,"Contact No:"),n(),r(15),n(),i(16,"div")(17,"strong"),r(18,"Email Id:"),n(),r(19),n(),i(20,"div")(21,"strong"),r(22,"Date of Joining:"),n(),r(23),B(24,"date"),n()()()),a&2){let t=f();l(7),v(" ",t.selectedEmployee.empCode,""),l(4),v(" ",t.selectedEmployee.designationName,""),l(4),v(" ",t.selectedEmployee.mobile,""),l(4),v(" ",t.selectedEmployee.emailId,""),l(4),v(" ",$(24,5,t.selectedEmployee.dateOfJoining,"dd-MM-yyyy")," ")}}function xi(a,e){a&1&&(i(0,"th",33),r(1," Select "),n())}function hi(a,e){if(a&1){let t=w();i(0,"td",34)(1,"input",35),Ne("ngModelChange",function(m){let c=x(t).$implicit;return je(c.isSelected,m)||(c.isSelected=m),h(m)}),n()()}if(a&2){let t=e.$implicit;l(),Pe("ngModel",t.isSelected)}}function vi(a,e){a&1&&(i(0,"th",36),r(1," No Of Leave "),n())}function yi(a,e){if(a&1){let t=w();i(0,"td",34)(1,"input",37),Ne("ngModelChange",function(m){let c=x(t).$implicit;return je(c.noOfLeave,m)||(c.noOfLeave=m),h(m)}),n()()}if(a&2){let t=e.$implicit;l(),Pe("ngModel",t.noOfLeave)}}function bi(a,e){a&1&&(i(0,"th",36),r(1," Type Of Leave "),n())}function Si(a,e){if(a&1&&(i(0,"td",38),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.leaveName," ")}}function _i(a,e){a&1&&(i(0,"th",36),r(1," Description "),n())}function Ci(a,e){if(a&1&&(i(0,"td",39),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.description," ")}}function wi(a,e){a&1&&s(0,"tr",40)}function Ei(a,e){a&1&&s(0,"tr",41)}function Ti(a,e){if(a&1){let t=w();i(0,"div",16)(1,"div",17)(2,"mat-paginator",18),g("page",function(m){x(t);let c=f();return h(c.onPageChange(m))}),n()(),i(3,"table",19),b(4,20),p(5,xi,2,0,"th",21)(6,hi,2,1,"td",22),S(),b(7,23),p(8,vi,2,0,"th",24)(9,yi,2,1,"td",22),S(),b(10,25),p(11,bi,2,0,"th",24)(12,Si,2,1,"td",26),S(),b(13,27),p(14,_i,2,0,"th",24)(15,Ci,2,1,"td",28),S(),p(16,wi,1,0,"tr",29)(17,Ei,1,0,"tr",30),n(),i(18,"div",31)(19,"button",32),g("click",function(){x(t);let m=f();return h(m.submitAssignedLeave())}),r(20," Submit "),n()()()}if(a&2){let t=f();l(2),d("length",t.totalRecords)("pageSize",t.pageSize)("pageSizeOptions",Y(6,ui)),l(),d("dataSource",t.dataSource),l(13),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns)}}var Ie=class a{constructor(e,t){this.empService=e;this.leaveService=t}assignedLeaves=[];employees=[];selectedEmployeeId=null;selectedEmployee=null;isLoading=!1;displayedColumns=["select","noOfLeave","leaveName","description"];dataSource=new ce;totalRecords=0;pageSize=10;pageIndex=0;searchTerm="";paginator;ngOnInit(){this.loadEmployees()}loadEmployees(){this.isLoading=!0,this.empService.getAllEmployees(null,null,"").subscribe({next:e=>{this.employees=e.data,console.log("Employees loaded:",this.employees),this.isLoading=!1},error:()=>this.isLoading=!1})}onEmployeeChange(){if(!this.selectedEmployeeId){this.selectedEmployee=null,this.dataSource.data=[];return}this.isLoading=!0,this.empService.getEmployeeById(this.selectedEmployeeId).subscribe({next:e=>{this.selectedEmployee=e.data[0],this.leaveService.getAssignedLeaveById(this.selectedEmployeeId).subscribe({next:t=>{this.assignedLeaves=t.data||[],console.log("Assigned Leave:",this.assignedLeaves),this.loadLeaveListWithAssigned()},error:()=>{this.assignedLeaves=[],this.loadLeaveListWithAssigned()}})},error:()=>this.isLoading=!1})}loadLeaveListWithAssigned(){this.leaveService.getAllLeave(this.searchTerm,this.pageIndex+1,this.pageSize).subscribe(e=>{this.dataSource.data=e.data.map(t=>{let o=this.assignedLeaves.find(m=>m.leaveType?.trim()===t.leaveName?.trim());return Me(ke({},t),{noOfLeave:o?o.noOfLeave:0,isSelected:!!o})}),this.totalRecords=e.totalRecords,this.dataSource._updateChangeSubscription(),this.isLoading=!1})}resetForm(){this.selectedEmployeeId=null,this.selectedEmployee=null,this.dataSource.data=[],this.pageIndex=0}onPageChange(e){this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.loadLeaveListWithAssigned()}toggleSelection(e){e.isSelected=!e.isSelected}submitAssignedLeave(){if(!this.selectedEmployeeId){Ce.default.fire({icon:"warning",title:"Oops...",text:"Please select an employee first!"});return}let e=this.dataSource.data.filter(o=>o.isSelected);if(e.length===0){Ce.default.fire({icon:"warning",title:"No Leave Selected",text:"Please select at least one leave!"});return}let t={employeeId:this.selectedEmployeeId,leave:e.map(o=>o.id).join(","),leaveNo:e.map(o=>o.noOfLeave||0).join(",")};console.log("Payload to API:",t),this.leaveService.assignLeaveToEmployee(t).subscribe({next:o=>{o.status?(Ce.default.fire({icon:"success",title:"Success",text:o.message||"Leave assigned successfully!"}),this.resetForm()):Ce.default.fire({icon:"error",title:"Failed",text:o.message})},error:o=>{console.error(o),Ce.default.fire({icon:"error",title:"Error",text:o.error.message})}})}applyFilter(e){let t=e.target.value;this.searchTerm=t,this.pageIndex=0,this.loadLeaveListWithAssigned()}static \u0275fac=function(t){return new(t||a)(y(be),y(Se))};static \u0275cmp=C({type:a,selectors:[["app-assign-leave"]],viewQuery:function(t,o){if(t&1&&O(F,5),t&2){let m;V(m=R())&&(o.paginator=m.first)}},standalone:!1,decls:16,vars:5,consts:[[1,"p-2","bg-gray-100","min-h-screen"],[1,"bg-white","shadow-lg","rounded-xl","mb-2","border","border-gray-200"],[1,"!bg-[#dd3d4f]","text-white","p-2","rounded-t-xl"],[1,"font-semibold","text-sm","tracking-wide"],[1,"p-2","space-y-4"],[1,"grid","grid-cols-12","items-center","gap-4"],[1,"col-span-12","md:col-span-2","font-semibold","text-sm","text-gray-700"],[1,"col-span-12","md:col-span-6"],[1,"w-full","border","border-gray-300","rounded-lg","p-2.5","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mt-3 p-2 border border-gray-200 rounded-lg bg-gray-50",4,"ngIf"],["class","bg-white shadow-lg rounded-xl border border-gray-200 overflow-x-auto",4,"ngIf"],[1,"mt-3","p-2","border","border-gray-200","rounded-lg","bg-gray-50"],[1,"font-semibold","text-[14px]","text-[#dd3d4f]","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-2","text-sm","text-gray-700"],[1,"bg-white","shadow-lg","rounded-xl","border","border-gray-200","overflow-x-auto"],[1,"flex","justify-end"],[3,"page","length","pageSize","pageSizeOptions"],["mat-table","",1,"min-w-[700px]","w-full","border","border-gray-300","divide-y","divide-gray-300","table-fixed","text-sm","md:text-base",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class"," px-1 py-1 text-center !bg-[#dd3d4f] text-white text-[14px]",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-center",4,"matCellDef"],["matColumnDef","noOfLeave"],["mat-header-cell","","class","px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]",4,"matHeaderCellDef"],["matColumnDef","leaveName"],["mat-cell","","class","px-1 py-1 text-[12px] m-[2]",4,"matCellDef"],["matColumnDef","description"],["mat-cell","","class","px-1 py-1 text-[12px]",4,"matCellDef"],["mat-header-row","","class","!h-9",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-100 !h-9",4,"matRowDef","matRowDefColumns"],[1,"flex","justify-end","p-2"],[1,"!bg-[#dd3d4f]","text-white","px-8","py-2.5","rounded-lg","font-semibold","text-[12px]","hover:bg-green-700",3,"click"],["mat-header-cell","",1,"px-1","py-1","text-center","!bg-[#dd3d4f]","text-white","text-[14px]"],["mat-cell","",1,"px-1","py-1","text-center"],["type","checkbox",1,"w-4","h-4","accent-green-600",3,"ngModelChange","ngModel"],["mat-header-cell","",1,"px-1","py-1","!bg-[#dd3d4f]","text-white","text-[14px]"],["type","number",1,"border","border-gray-300","rounded","p-1.5","w-[55px]","h-[25px]","text-center","text-[12px]",3,"ngModelChange","ngModel"],["mat-cell","",1,"px-1","py-1","text-[12px]","m-[2]"],["mat-cell","",1,"px-1","py-1","text-[12px]"],["mat-header-row","",1,"!h-9"],["mat-row","",1,"hover:bg-gray-100","!h-9"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),r(4," Assign Leave "),n()(),i(5,"div",4)(6,"div",5)(7,"div",6),r(8," Employee Name "),n(),i(9,"div",7)(10,"select",8),Ne("ngModelChange",function(c){return je(o.selectedEmployeeId,c)||(o.selectedEmployeeId=c),c}),g("change",function(){return o.onEmployeeChange()}),i(11,"option",9),r(12,"-- Select Employee --"),n(),p(13,fi,2,2,"option",10),n()()(),p(14,gi,25,8,"div",11),n()(),p(15,Ti,21,7,"div",12),n()),t&2&&(l(10),Pe("ngModel",o.selectedEmployeeId),l(),d("ngValue",null),l(2),d("ngForOf",o.employees),l(),d("ngIf",o.selectedEmployee),l(),d("ngIf",o.selectedEmployee))},dependencies:[I,k,z,q,M,Ft,Ve,W,D,Dt,ie,ae,me,oe,ne,se,re,le,de,pe,F,K],styles:[".mat-mdc-paginator-page-size-label{display:none!important}  .mat-mdc-paginator-range-label{display:none!important}  .mat-mdc-paginator-page-size-select{width:60px!important;min-width:45px!important}"]})};var dt=G(ee());var we=class a{constructor(e){this.http=e}baseUrl=te.apiUrl;uploadAttendance(e){return he(this,null,function*(){return yield ct(this.http.post(`${this.baseUrl}Admin/uploadAttendance`,e))})}getAttendance(e){return this.http.get(`${this.baseUrl}Admin/EmpAttendancebyEmpCode`,{params:{empCode:e.empCode,month:e.month,year:e.year}})}getAttendanceSummary(e){return this.http.get(`${this.baseUrl}Admin/EmpMonthlyWorkingDetailByEmpCode`,{params:{empCode:e.empCode,month:e.month,year:e.year}})}static \u0275fac=function(t){return new(t||a)(J(X))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Di=(a,e)=>({"border-[#dd3d4f] bg-red-50":a,"border-gray-300":e});function Fi(a,e){if(a&1&&(i(0,"option",23),r(1),n()),a&2){let t=e.$implicit;d("value",t),l(),u(t)}}function Ii(a,e){if(a&1&&(i(0,"option",23),r(1),n()),a&2){let t=e.$implicit;d("value",t.value),l(),v(" ",t.label," ")}}function ki(a,e){if(a&1&&(i(0,"p",24),r(1),n()),a&2){let t=f();l(),v(" ",t.selectedFile.name," ")}}function Mi(a,e){a&1&&(i(0,"div",25)(1,"div",26),s(2,"span",27)(3,"span",28)(4,"span",29),n(),i(5,"div",30),r(6," Uploading attendance\u2026 "),n()())}var Ue=class a{constructor(e,t){this.fb=e;this.attendanceService=t;this.attendanceForm=this.fb.group({year:["",E.required],month:["",E.required],file:[null,E.required]})}attendanceForm;selectedFile=null;isDragging=!1;isSubmitting=!1;successMsg="";years=[2024,2025,2026];months=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}];onFileSelect(e){let t=e.target.files[0];t&&this.setFile(t)}onDrop(e){e.preventDefault(),this.isDragging=!1,e.dataTransfer?.files.length&&this.setFile(e.dataTransfer.files[0])}setFile(e){this.selectedFile=e,this.attendanceForm.patchValue({file:e})}submit(){return he(this,null,function*(){if(this.attendanceForm.invalid||!this.selectedFile)return;let e=new FormData;e.append("year",this.attendanceForm.value.year),e.append("month",this.attendanceForm.value.month),e.append("file",this.selectedFile);try{this.isSubmitting=!0;let t=yield this.attendanceService.uploadAttendance(e);console.log("res",t),yield dt.default.fire({title:"Success!",text:"Attendance uploaded successfully",icon:"success",confirmButtonText:"OK"}),this.attendanceForm.reset(),this.selectedFile=null}catch(t){console.error(t),dt.default.fire({title:"Error!",text:"Upload failed",icon:"error",confirmButtonText:"OK"})}finally{this.isSubmitting=!1}})}static \u0275fac=function(t){return new(t||a)(y(N),y(we))};static \u0275cmp=C({type:a,selectors:[["app-upload-attendance"]],standalone:!1,decls:39,vars:10,consts:[["fileInput",""],[1,"max-w-4xl","mx-auto","px-4","py-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200"],[1,"px-6","py-4","border-b"],[1,"text-xl","font-semibold","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],[1,"px-6","py-6","space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-5"],[1,"text-sm","font-medium","text-gray-700","mb-1","block"],["formControlName","year",1,"w-full","h-[46px]","px-3","rounded-lg","border","focus:ring-2","focus:ring-[#dd3d4f]","focus:outline-none"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","month",1,"w-full","rounded-lg","border","px-4","py-3"],[1,"text-sm","font-medium","text-gray-700","mb-2","block"],[1,"border","border-dashed","rounded-lg","px-5","py-5","text-center","transition","bg-gray-50","cursor-pointer",3,"drop","dragover","dragleave","ngClass"],["type","file","accept",".xls,.xlsx",1,"hidden",3,"change"],[3,"click"],[1,"text-sm","text-gray-700","font-medium"],[1,"text-xs","text-gray-500","mt-1"],["class","text-xs text-[rgb(136_221_61)] mt-2 font-medium truncate",4,"ngIf"],[1,"flex","justify-end","pt-4","border-t"],["type","submit",1,"bg-[#dd3d4f]","text-white","px-7","py-2.5","rounded-lg","text-sm","font-medium","hover:bg-red-600","transition","disabled:opacity-50",3,"disabled"],["class",`fixed inset-0 z-50 flex flex-col items-center justify-center gap-3
            bg-black/10 backdrop-blur-[2px] pointer-events-none`,4,"ngIf"],[3,"value"],[1,"text-xs","text-[rgb(136_221_61)]","mt-2","font-medium","truncate"],[1,"fixed","inset-0","z-50","flex","flex-col","items-center","justify-center","gap-3","bg-black/10","backdrop-blur-[2px]","pointer-events-none"],[1,"flex","items-center","gap-2"],[1,"w-2.5","h-2.5","sm:w-3","sm:h-3","bg-[#dd3d4f]","rounded-full","animate-bounce"],[1,"w-2.5","h-2.5","sm:w-3","sm:h-3","bg-[#dd3d4f]","rounded-full","animate-bounce","[animation-delay:150ms]"],[1,"w-2.5","h-2.5","sm:w-3","sm:h-3","bg-[#dd3d4f]","rounded-full","animate-bounce","[animation-delay:300ms]"],[1,"text-center","text-xs","sm:text-sm","font-medium","text-gray-700"]],template:function(t,o){if(t&1){let m=w();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),r(4," Upload Attendance "),n(),i(5,"p",5),r(6," Upload monthly attendance Excel for employees "),n()(),i(7,"form",6),g("ngSubmit",function(){return x(m),h(o.submit())}),i(8,"div",7)(9,"div")(10,"label",8),r(11," Year "),n(),i(12,"select",9)(13,"option",10),r(14,"Select year"),n(),p(15,Fi,2,2,"option",11),n()(),i(16,"div")(17,"label",8),r(18," Month "),n(),i(19,"select",12)(20,"option",10),r(21,"Select Month"),n(),p(22,Ii,2,2,"option",11),n()()(),i(23,"div")(24,"label",13),r(25," Attendance File "),n(),i(26,"div",14),g("drop",function(_){return x(m),h(o.onDrop(_))})("dragover",function(_){return x(m),_.preventDefault(),h(o.isDragging=!0)})("dragleave",function(){return x(m),h(o.isDragging=!1)}),i(27,"input",15,0),g("change",function(_){return x(m),h(o.onFileSelect(_))}),n(),i(29,"div",16),g("click",function(){x(m);let _=fe(28);return h(_.click())}),i(30,"p",17),r(31," Drop Excel file here or click to upload "),n(),i(32,"p",18),r(33," Supported formats: .xls, .xlsx "),n(),p(34,ki,2,1,"p",19),n()()(),i(35,"div",20)(36,"button",21),r(37," Upload Attendance "),n()()()()(),p(38,Mi,7,0,"div",22)}t&2&&(l(7),d("formGroup",o.attendanceForm),l(8),d("ngForOf",o.years),l(7),d("ngForOf",o.months),l(4),d("ngClass",yt(7,Di,o.isDragging,!o.isDragging)),l(8),d("ngIf",o.selectedFile),l(2),d("disabled",o.attendanceForm.invalid),l(2),d("ngIf",o.isSubmitting))},dependencies:[St,I,k,L,z,q,W,D,A,P,j],styles:[".attendance-container[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;padding:30px 25px;border-radius:20px;background:#fff0f2;box-shadow:0 10px 25px #dd3d4f33;text-align:center;font-family:Segoe UI,sans-serif}.attendance-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:25px;color:#dd3d4f;font-size:1.8rem;font-weight:700}.dropdowns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:25px}.dropdowns[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;margin:0 5px;display:flex;flex-direction:column;font-weight:600;color:#dd3d4f;font-size:.95rem}.dropdowns[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;margin-top:5px;border-radius:8px;border:1px solid #dd3d4f;background:#fff;font-size:.95rem;color:#333;transition:.3s}.dropdowns[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#a02a3b;box-shadow:0 0 5px #dd3d4f80}.upload-area[_ngcontent-%COMP%]{border:2px dashed #dd3d4f;border-radius:15px;padding:50px 20px;margin-bottom:25px;transition:all .3s ease;cursor:pointer;color:#dd3d4f;font-weight:500;font-size:.95rem;background-color:#fff0f2}.upload-area.dragging[_ngcontent-%COMP%]{border-color:#a02a3b;background-color:#ffd6dc;color:#a02a3b}.upload-area[_ngcontent-%COMP%]   .browse[_ngcontent-%COMP%]{color:#dd3d4f;cursor:pointer;font-weight:700;text-decoration:underline}.upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]{padding:12px 25px;background-color:#dd3d4f;border:none;color:#fff;border-radius:12px;cursor:pointer;transition:all .3s;font-weight:600;font-size:1rem;width:100%}button[_ngcontent-%COMP%]:disabled{background-color:#f7233c;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#a02a3b;box-shadow:0 5px 15px #dd3d4f4d}"]})};function Ai(a,e){if(a&1&&(i(0,"option",14),r(1),n()),a&2){let t=e.$implicit;d("value",t.value),l(),u(t.label)}}function Li(a,e){if(a&1&&(i(0,"option"),r(1),n()),a&2){let t=e.$implicit;l(),u(t)}}function Pi(a,e){a&1&&(i(0,"span"),r(1,"View"),n())}function ji(a,e){a&1&&s(0,"div",15)}function Ni(a,e){if(a&1&&(i(0,"div",16)(1,"div",17)(2,"p",18),r(3,"Total Working Days"),n(),i(4,"h3",19),r(5),n()(),i(6,"div",20)(7,"p",21),r(8,"Present"),n(),i(9,"h3",22),r(10),n()(),i(11,"div",23)(12,"p",24),r(13,"Absent"),n(),i(14,"h3",25),r(15),n()(),i(16,"div",26)(17,"p",27),r(18,"Half Day"),n(),i(19,"h3",28),r(20),n()()()),a&2){let t=f();l(5),u(t.attendanceSummary.totalWorkingDays),l(5),u(t.attendanceSummary.presentDays),l(5),u(t.attendanceSummary.absentDays),l(5),u(t.attendanceSummary.halfDays)}}var He=class a{constructor(e,t){this.fb=e;this.attendanceService=t}filterForm;searchForm;paginator;attendanceSummary=null;attendancedetails=null;isLoading=!1;months=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];years=[];attendanceColumns=[{key:"attendanceDate",label:"Date",type:"date"},{key:"status",label:"Status",align:"center"},{key:"inTime",label:"In Time",align:"center"},{key:"outTime",label:"Out Time",align:"center"}];ngOnInit(){this.filterForm=this.fb.group({empCode:["",E.required],month:["",E.required],year:["",E.required]}),this.searchForm=this.fb.group({search:[""]});let e=new Date().getFullYear();for(let t=e;t>=e-1;t--)this.years.push(t)}loadAttendance(){if(this.filterForm.invalid)return;this.isLoading=!0;let e={empCode:this.filterForm.value.empCode?.trim(),month:this.filterForm.value.month,year:this.filterForm.value.year};this.attendanceService.getAttendance(e).subscribe({next:t=>{this.attendancedetails=t.data,this.isLoading=!1},error:t=>{console.error(t),this.attendancedetails=null,this.isLoading=!1}}),this.attendanceService.getAttendanceSummary(e).subscribe({next:t=>{console.log("att",t.data),this.attendanceSummary=t.data[0],this.isLoading=!1},error:t=>{console.error(t),this.attendanceSummary=null,this.isLoading=!1}})}onScroll(e){this.paginator.handleScroll(e,this.searchForm.value.search)}static \u0275fac=function(t){return new(t||a)(y(N),y(we))};static \u0275cmp=C({type:a,selectors:[["app-view-attendance"]],standalone:!1,decls:18,vars:11,consts:[[1,"bg-white","rounded-xl","shadow","ms-1","mt-2","p-3","mb-3"],[1,"text-sm","font-semibold","mb-4","text-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","items-end",3,"formGroup"],["type","text","placeholder","Employee Code","formControlName","empCode",1,"border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-[#dd3d4f]"],["formControlName","month",1,"border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-[#dd3d4f]"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","year",1,"border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-[#dd3d4f]"],[4,"ngFor","ngForOf"],["type","button",1,"bg-[#dd3d4f]","text-white","rounded-lg","font-medium","flex","justify-center","items-center","gap-2","px-4","py-2","hover:bg-red-600","disabled:opacity-50",3,"click","disabled"],[4,"ngIf"],["class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin",4,"ngIf"],["class","grid grid-cols-2 ms-1 md:grid-cols-4 gap-4 mb-3",4,"ngIf"],[3,"columns","data","showActions","loading"],[3,"value"],[1,"w-4","h-4","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"grid","grid-cols-2","ms-1","md:grid-cols-4","gap-4","mb-3"],[1,"bg-white","shadow","rounded-xl","p-4","text-center"],[1,"text-gray-500","text-sm"],[1,"text-gray-700","font-semibold","text-lg"],[1,"bg-green-50","shadow","rounded-xl","p-4","text-center"],[1,"text-green-600","text-sm"],[1,"text-green-800","font-semibold","text-lg"],[1,"bg-red-50","shadow","rounded-xl","p-4","text-center"],[1,"text-red-600","text-sm"],[1,"text-red-800","font-semibold","text-lg"],[1,"bg-yellow-50","shadow","rounded-xl","p-4","text-center"],[1,"text-yellow-600","text-sm"],[1,"text-yellow-800","font-semibold","text-lg"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"h2",1),r(2,"View Attendance"),n(),i(3,"form",2),s(4,"input",3),i(5,"select",4)(6,"option",5),r(7,"Select Month"),n(),p(8,Ai,2,2,"option",6),n(),i(9,"select",7)(10,"option",5),r(11,"Select Year"),n(),p(12,Li,2,1,"option",8),n(),i(13,"button",9),g("click",function(){return o.loadAttendance()}),p(14,Pi,2,0,"span",10)(15,ji,1,0,"div",11),n()()(),p(16,Ni,21,4,"div",12),s(17,"app-generic-table",13)),t&2&&(l(3),d("formGroup",o.filterForm),l(5),d("ngForOf",o.months),l(4),d("ngForOf",o.years),l(),d("disabled",o.filterForm.invalid||o.isLoading),l(),d("ngIf",!o.isLoading),l(),d("ngIf",o.isLoading),l(),d("ngIf",o.attendanceSummary),l(),d("columns",o.attendanceColumns)("data",o.attendancedetails)("showActions",!1)("loading",o.isLoading))},dependencies:[I,k,L,z,q,M,W,D,A,P,j,_e],encapsulation:2})};var Oi=()=>[20,50,100];function Vi(a,e){a&1&&(i(0,"th",31),r(1," Sr No."),n())}function Ri(a,e){if(a&1&&(i(0,"td",32),r(1),n()),a&2){let t=e.index;l(),u(t+1)}}function Bi(a,e){a&1&&(i(0,"th",33),r(1," Emp Code"),n())}function zi(a,e){if(a&1&&(i(0,"td",34),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.empCode,"")}}function qi(a,e){a&1&&(i(0,"th",35),r(1," Name"),n())}function Ui(a,e){if(a&1&&(i(0,"td",34),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.empName," ")}}function Hi(a,e){a&1&&(i(0,"th",36),r(1," Designation"),n())}function $i(a,e){if(a&1&&(i(0,"td",37),r(1),n()),a&2){let t=e.$implicit;l(),v(" ",t.designationName,"")}}function Wi(a,e){a&1&&(i(0,"th",38)(1,"div",39),r(2," CL "),n(),i(3,"div",40)(4,"div",41),r(5,"Total"),n(),i(6,"div",41),r(7,"Remaining"),n()()())}function Gi(a,e){if(a&1&&(i(0,"td",42)(1,"div",43)(2,"div",44),r(3),n(),i(4,"div",45),r(5),n()()()),a&2){let t=e.$implicit;l(3),u(t.clTotal||0),l(2),u(t.clRemaining||0)}}function Qi(a,e){a&1&&(i(0,"th",38)(1,"div",39),r(2," EL "),n(),i(3,"div",40)(4,"div",46),r(5,"Total"),n(),i(6,"div",41),r(7,"Remaining"),n()()())}function Ji(a,e){if(a&1&&(i(0,"td",42)(1,"div",43)(2,"div",41),r(3),n(),i(4,"div",41),r(5),n()()()),a&2){let t=e.$implicit;l(3),u(t.elTotal||0),l(2),u(t.elRemaining||0)}}function Yi(a,e){a&1&&(i(0,"th",47)(1,"div",39),r(2," SL "),n(),i(3,"div",40)(4,"div",48),r(5,"Total"),n(),i(6,"div",49),r(7,"Remaining"),n()()())}function Ki(a,e){if(a&1&&(i(0,"td",50)(1,"div",43)(2,"div",41),r(3),n(),i(4,"div",41),r(5),n()()()),a&2){let t=e.$implicit;l(3),u(t.slTotal||0),l(2),u(t.slRemaining||0)}}function Xi(a,e){a&1&&s(0,"tr",51)}function Zi(a,e){a&1&&s(0,"tr",52)}var $e=class a{constructor(e){this.leaveService=e}displayedColumns=["srNo","empCode","empName","designation","CL","EL","SL"];dataSource=new ce([]);totalRecords=0;pageSize=20;pageNumber=1;searchTerm="";paginator;selectedEmployeeLeaves=[];selectedEmployeeName="";showLeaveDropdown=!1;ngOnInit(){this.loadAssignedLeave(this.pageNumber,this.pageSize,this.searchTerm)}loadAssignedLeave(e,t,o){this.leaveService.getAllAssignedLeave(o,e,t).subscribe({next:m=>{m.success&&(this.dataSource.data=m.data,this.totalRecords=m.totalRecords)},error:m=>{console.error("Error fetching assigned leave:",m)}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadAssignedLeave(this.pageNumber,this.pageSize,this.searchTerm)}onSearchChange(e){this.searchTerm=e.target.value?.trim(),this.pageNumber=1,this.loadAssignedLeave(this.pageNumber,this.pageSize,this.searchTerm)}showLeave(e){this.selectedEmployeeLeaves=[{leaveType:"CL",noOfLeave:e.clTotal},{leaveType:"EL",noOfLeave:e.elTotal},{leaveType:"SL",noOfLeave:e.slTotal}],this.selectedEmployeeName=e.empName,this.showLeaveDropdown=!0}closeLeaveDropdown(){this.showLeaveDropdown=!1}static \u0275fac=function(t){return new(t||a)(y(Se))};static \u0275cmp=C({type:a,selectors:[["app-all-employee-leave-list"]],viewQuery:function(t,o){if(t&1&&O(F,5),t&2){let m;V(m=R())&&(o.paginator=m.first)}},standalone:!1,decls:35,vars:7,consts:[[1,"panel-header","panel-header-sm"],[1,"content","px-3","py-1"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-2","w-full"],[1,"text-lg","md:text-[16px]","font-semibold","text-[#444]","text-center","md:text-left","md:flex-1"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","w-full","md:w-auto"],[1,"relative","w-full","sm:w-48","md:w-64"],["type","text","placeholder","Search employee...",1,"w-full","pl-10","pr-3","py-[6px]","text-[12px]","md:text-[14px]","rounded-lg","bg-[#F6F7FB]","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]","table-search",3,"input"],[1,"fa-solid","fa-magnifying-glass","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","text-[12px]","md:text-[14px]"],["aria-label","Select page","showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],[1,"bg-white","shadow","rounded-lg","relative","overflow-x-auto","w-full"],["mat-table","",1,"min-w-[700px]","w-full","border","border-gray-300","divide-y","divide-gray-300","table-fixed","text-sm","md:text-base",3,"dataSource"],["matColumnDef","srNo"],["mat-header-cell","","class","w-[50px] border-r whitespace-nowrap md:w-[70px] text-[12px] md:text-[14px] px-1 py-1 text-center !bg-[#dd3d4f] text-white",4,"matHeaderCellDef"],["mat-cell","","class","  border-r px-1 py-1 text-center text-[12px] md:text-[14px]",4,"matCellDef"],["matColumnDef","empCode"],["mat-header-cell","","class"," border-r whitespace-nowrap min-w-[80px] md:min-w-[100px] text-[12px] md:text-[14px] px-1 py-1 !bg-[#dd3d4f] text-white white ",4,"matHeaderCellDef"],["mat-cell","","class"," border-r px-1 py-1 text-[12px] md:text-[14px] text-center",4,"matCellDef"],["matColumnDef","empName"],["mat-header-cell","","class"," border-r min-w-[140px] md:min-w-[200px] text-[12px] md:text-[14px] px-1 py-1 !bg-[#dd3d4f] text-white",4,"matHeaderCellDef"],["matColumnDef","designation"],["mat-header-cell","","class","border-r min-w-[120px] md:min-w-[150px] text-[12px] md:text-[14px] px-1 py-1 !bg-[#dd3d4f] text-white",4,"matHeaderCellDef"],["mat-cell","","class","border-r whitespace-nowrap px-1 py-1 text-[12px] md:text-[14px] text-center",4,"matCellDef"],["matColumnDef","CL"],["mat-header-cell","","class","min-w-[160px] !bg-[#dd3d4f] text-white px-1 py-1 border-r",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-center border-r",4,"matCellDef"],["matColumnDef","EL"],["matColumnDef","SL"],["mat-header-cell","","class","min-w-[160px] !bg-[#dd3d4f] text-white px-1 py-1",4,"matHeaderCellDef"],["mat-cell","","class","py-1 text-center",4,"matCellDef"],["mat-header-row","","class","!h-9",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-100 !h-9",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"w-[50px]","border-r","whitespace-nowrap","md:w-[70px]","text-[12px]","md:text-[14px]","px-1","py-1","text-center","!bg-[#dd3d4f]","text-white"],["mat-cell","",1,"border-r","px-1","py-1","text-center","text-[12px]","md:text-[14px]"],["mat-header-cell","",1,"border-r","whitespace-nowrap","min-w-[80px]","md:min-w-[100px]","text-[12px]","md:text-[14px]","px-1","py-1","!bg-[#dd3d4f]","text-white","white"],["mat-cell","",1,"border-r","px-1","py-1","text-[12px]","md:text-[14px]","text-center"],["mat-header-cell","",1,"border-r","min-w-[140px]","md:min-w-[200px]","text-[12px]","md:text-[14px]","px-1","py-1","!bg-[#dd3d4f]","text-white"],["mat-header-cell","",1,"border-r","min-w-[120px]","md:min-w-[150px]","text-[12px]","md:text-[14px]","px-1","py-1","!bg-[#dd3d4f]","text-white"],["mat-cell","",1,"border-r","whitespace-nowrap","px-1","py-1","text-[12px]","md:text-[14px]","text-center"],["mat-header-cell","",1,"min-w-[160px]","!bg-[#dd3d4f]","text-white","px-1","py-1","border-r"],[1,"text-center","text-[12px]","md:text-[14px]","font-semibold"],[1,"grid","grid-cols-2","text-[11px]","md:text-[12px]","border-white"],[1,"text-center"],["mat-cell","",1,"px-1","py-1","text-center","border-r"],[1,"grid","grid-cols-2","text-[12px]","md:text-[14px]"],[1,"text-center","px-3","border-r"],[1,"text-center","px-3"],[1,"text-center","border-white"],["mat-header-cell","",1,"min-w-[160px]","!bg-[#dd3d4f]","text-white","px-1","py-1"],[1,"text-center","border-white","px-4"],[1,"text-center","px-4"],["mat-cell","",1,"py-1","text-center"],["mat-header-row","",1,"!h-9"],["mat-row","",1,"hover:bg-gray-100","!h-9"]],template:function(t,o){t&1&&(s(0,"div",0),i(1,"div",1)(2,"div",2)(3,"h1",3),r(4," Leave List "),n(),i(5,"div",4)(6,"div",5)(7,"input",6),g("input",function(c){return o.onSearchChange(c)}),n(),s(8,"i",7),n(),i(9,"mat-paginator",8),g("page",function(c){return o.onPageChange(c)}),n()()(),i(10,"div",9)(11,"table",10),b(12,11),p(13,Vi,2,0,"th",12)(14,Ri,2,1,"td",13),S(),b(15,14),p(16,Bi,2,0,"th",15)(17,zi,2,1,"td",16),S(),b(18,17),p(19,qi,2,0,"th",18)(20,Ui,2,1,"td",16),S(),b(21,19),p(22,Hi,2,0,"th",20)(23,$i,2,1,"td",21),S(),b(24,22),p(25,Wi,8,0,"th",23)(26,Gi,6,2,"td",24),S(),b(27,25),p(28,Qi,8,0,"th",23)(29,Ji,6,2,"td",24),S(),b(30,26),p(31,Yi,8,0,"th",27)(32,Ki,6,2,"td",28),S(),p(33,Xi,1,0,"tr",29)(34,Zi,1,0,"tr",30),n()()()),t&2&&(l(9),d("length",o.totalRecords)("pageSize",o.pageSize)("pageSizeOptions",Y(6,Oi)),l(2),d("dataSource",o.dataSource),l(22),d("matHeaderRowDef",o.displayedColumns),l(),d("matRowDefColumns",o.displayedColumns))},dependencies:[ie,ae,me,oe,ne,se,re,le,de,pe,F],styles:[".mat-mdc-paginator-page-size-label{display:none!important}  .mat-mdc-paginator-range-label{display:none!important}  .mat-mdc-paginator-page-size-select{width:65px!important;min-width:55px!important}"]})};var H=G(ee());var Ee=class a{constructor(e){this.http=e}baseUrl=te.apiUrl;getEmpListForWebByTechId(e){return this.http.get(`${this.baseUrl}Master/EmpListForWebTypeByTechId?techId=${e}`)}getEmpListForAppByTechId(e){return this.http.get(`${this.baseUrl}Master/EmpListForAppBtTechId?techId=${e}`)}getProjectDetailsByEmpId(e){return this.http.get(`${this.baseUrl}Admin/getProjectDetailsByEmpId?empId=${e}`)}addProject(e){return this.http.post(`${this.baseUrl}Admin/add-update-Project`,e)}getProjectById(e){return this.http.get(`${this.baseUrl}Admin/getAllProjectById?id=${e}`)}static \u0275fac=function(t){return new(t||a)(J(X))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var en=["sopFile"],tn=["technicalFile"];function nn(a,e){if(a&1){let t=w();i(0,"div",7)(1,"label",24),r(2,"Technical Document"),n(),i(3,"input",25,1),g("change",function(m){x(t);let c=f();return h(c.onTechnicalFileChange(m))}),n()()}}function an(a,e){a&1&&(i(0,"h4",37),r(1," Software Type "),n())}function on(a,e){a&1&&(i(0,"label",38),s(1,"input",39),r(2," App "),n())}function rn(a,e){a&1&&(i(0,"label",38),s(1,"input",40),r(2," Web "),n())}function ln(a,e){if(a&1&&(i(0,"option",50),r(1),n()),a&2){let t=e.$implicit;d("ngValue",t.id),l(),u(t.technologyName)}}function mn(a,e){if(a&1&&(i(0,"option",53),r(1),n()),a&2){let t=e.$implicit;d("value",t.empId),l(),u(t.empName)}}function sn(a,e){if(a&1){let t=w();i(0,"div",45)(1,"select",51),g("change",function(){x(t);let m=f(2);return h(m.onSelectMobileEmployee())}),i(2,"option",47),r(3,"Select Mobile Employee"),n(),p(4,mn,2,2,"option",52),n(),i(5,"label",13),r(6," Select Employee "),n(),i(7,"span",15),s(8,"i",16),n()()}if(a&2){let t=f(2);l(4),d("ngForOf",t.filteredMobileEmployees)}}function dn(a,e){if(a&1&&(i(0,"div",41)(1,"h4",37),r(2,"Mobile App Type"),n(),i(3,"div",42)(4,"label",38),s(5,"input",43),r(6," Android "),n(),i(7,"label",38),s(8,"input",44),r(9," iOS "),n()(),i(10,"div",45)(11,"select",46)(12,"option",47),r(13,"Select Mobile Skill"),n(),p(14,ln,2,2,"option",48),n(),i(15,"label",13),r(16," Select Mobile Skill "),n(),i(17,"span",15),s(18,"i",16),n()(),p(19,sn,9,1,"div",49),n()),a&2){let t=f();l(14),d("ngForOf",t.mobileSkills),l(5),d("ngIf",t.filteredMobileEmployees.length)}}function pn(a,e){if(a&1&&(i(0,"option",50),r(1),n()),a&2){let t=e.$implicit;d("ngValue",t.id),l(),u(t.technologyName)}}function cn(a,e){if(a&1&&(i(0,"option",53),r(1),n()),a&2){let t=e.$implicit;d("value",t.empId),l(),u(t.empName)}}function un(a,e){if(a&1){let t=w();i(0,"div",45)(1,"select",55),g("change",function(){x(t);let m=f(2);return h(m.onSelectWebEmployee())}),i(2,"option",47),r(3,"Select Web Employee"),n(),p(4,cn,2,2,"option",52),n(),s(5,"label",13),i(6,"span",15),s(7,"i",16),n()()}if(a&2){let t=f(2);l(4),d("ngForOf",t.filteredWebEmployees)}}function fn(a,e){if(a&1&&(i(0,"div",41)(1,"h4",37),r(2,"Web Details"),n(),i(3,"div",45)(4,"select",54)(5,"option",47),r(6,"Select Web skill"),n(),p(7,pn,2,2,"option",48),n(),i(8,"label",13),r(9," Select Web Skill "),n(),i(10,"span",15),s(11,"i",16),n()(),p(12,un,8,1,"div",49),n()),a&2){let t=f();l(7),d("ngForOf",t.webSkills),l(5),d("ngIf",t.filteredWebEmployees.length)}}function gn(a,e){a&1&&(i(0,"div",56)(1,"h3",57),r(2,"Digital Marketing Details"),n(),i(3,"div",58)(4,"div",7),s(5,"input",59),i(6,"label",13),r(7," SEO "),n()(),i(8,"div",7),s(9,"input",60),i(10,"label",13),r(11," SMO "),n()(),i(12,"div",7),s(13,"input",61),i(14,"label",13),r(15," GMB "),n()(),i(16,"div",7),s(17,"input",62),i(18,"label",13),r(19," Paid Ads "),n()()()())}function xn(a,e){if(a&1&&(i(0,"div",66)(1,"div",67)(2,"h4",68),r(3),n()(),i(4,"div",69)(5,"div",70)(6,"span",71),r(7,"App Employee:"),n(),i(8,"span"),r(9),n()(),i(10,"div",70)(11,"span",71),r(12,"App Technology Name:"),n(),i(13,"span"),r(14),n()(),i(15,"div",70)(16,"span",71),r(17,"Web Employee:"),n(),i(18,"span"),r(19),n()(),i(20,"div",70)(21,"span",71),r(22,"Web Technology Name:"),n(),i(23,"span"),r(24),n()(),i(25,"div",70)(26,"span",71),r(27,"Assign Date:"),n(),i(28,"span"),r(29),B(30,"date"),n()(),i(31,"div",70)(32,"span",71),r(33,"completion Date:"),n(),i(34,"span"),r(35),B(36,"date"),n()()()()),a&2){let t=e.$implicit;l(3),u(t.projectTitle),l(6),u(t.appEmpName||"\u2014"),l(5),u(t.appTechnologyName||"\u2014"),l(5),u(t.webEmpName||"\u2014"),l(5),u(t.webTechnologyName||"\u2014"),l(5),u($(30,7,t.assignDate,"dd MMM yyyy")),l(6),u($(36,10,t.completionDate,"dd MMM yyyy"))}}function hn(a,e){if(a&1&&(i(0,"div",63)(1,"h3",57),r(2," Ongoing Employee Projects "),n(),i(3,"div",64),p(4,xn,37,13,"div",65),n()()),a&2){let t=f();l(4),d("ngForOf",t.selectedEmployeeProjects)}}var We=class a{constructor(e,t,o,m){this.fb=e;this.masterService=t;this.addProjectService=o;this.router=m}isEditMode=!1;editProjectId=0;sopFile;technicalFile;projectForm;allTechnologies=[];mobileSkills=[];webSkills=[];filteredMobileEmployees=[];filteredWebEmployees=[];selectedEmployeeProjects=[];selectedEmployeeDetails=null;existingSopPath=null;existingTechnicalPath=null;newSopFile=null;newTechnicalFile=null;minAssignDate="";minEndDate="";minCompletionDate="";ngOnInit(){this.initForm(),this.loadTechnologies();let e=this.router.getCurrentNavigation(),t=history.state?.project;console.log("Received project data:",t),t&&this.bindEditData(t),this.projectForm.get("startDate")?.valueChanges.subscribe(o=>{if(o){let m=this.formatDate(new Date(o));this.minAssignDate=m,this.minEndDate=m,this.minCompletionDate=m,this.resetIfBefore("assignDate",new Date(o)),this.resetIfBefore("endDate",new Date(o)),this.resetIfBefore("completionDate",new Date(o))}else this.minAssignDate="",this.minEndDate="",this.minCompletionDate=""}),this.projectForm.get("mobileSkill")?.valueChanges.subscribe(o=>{this.onMobileSkillChange(o)}),this.projectForm.get("mobileEmpId")?.valueChanges.subscribe(()=>{this.onSelectMobileEmployee()}),this.projectForm.get("webSkill")?.valueChanges.subscribe(o=>{this.onWebSkillChange(o)}),this.projectForm.get("webEmpId")?.valueChanges.subscribe(()=>{this.onSelectWebEmployee()})}initForm(){this.projectForm=this.fb.group({category:["",E.required],projectTitle:["",E.required],description:[""],startDate:["",E.required],assignDate:["",E.required],endDate:[""],completionDate:[""],isMobileSoftware:[!1],isWebSoftware:[!1],isAndroid:[!1],isIOS:[!1],mobileSkill:[""],mobileEmpId:[""],webSkill:[""],webEmpId:[""],SEO:[""],SMO:[""],GMB:[""],paidAds:[""]})}get category(){return this.projectForm.get("category")?.value||""}get isMobileSoftware(){return this.projectForm.get("isMobileSoftware")?.value}get isWebSoftware(){return this.projectForm.get("isWebSoftware")?.value}loadTechnologies(){this.masterService.getAllTechnology(1,100).subscribe({next:e=>{this.allTechnologies=e?.data||[],this.mobileSkills=this.allTechnologies.filter(t=>t.softwareType?.toLowerCase()==="app"),this.webSkills=this.allTechnologies.filter(t=>t.softwareType?.toLowerCase()==="web")},error:e=>console.error(e)})}onCategoryChange(){this.projectForm.patchValue({isMobileSoftware:!1,isWebSoftware:!1,isAndroid:!1,isIOS:!1,mobileSkill:"",webSkill:"",mobileEmpId:"",webEmpId:"",SEO:"",SMO:"",GMB:"",paidAds:""}),this.filteredMobileEmployees=[],this.filteredWebEmployees=[]}onMobileSkillChange(e){let t=e?Number(e):null;if(!t){this.filteredMobileEmployees=[];return}this.addProjectService.getEmpListForAppByTechId(t).subscribe({next:o=>{this.filteredMobileEmployees=o?.data||[],this.filteredMobileEmployees.length===0&&H.default.fire({icon:"info",title:"No Employee Found",text:"No employee is available for this selected skill."})},error:o=>{this.filteredMobileEmployees=[],H.default.fire({icon:"error",title:"Error",text:"Unable to fetch employee list. Please try again."})}})}onSelectMobileEmployee(){let e=this.projectForm.get("mobileEmpId")?.value;if(!e)return;let t=Number(e);this.addProjectService.getProjectDetailsByEmpId(t).subscribe({next:o=>this.selectedEmployeeProjects=o?.data||[],error:()=>this.selectedEmployeeProjects=[]})}onWebSkillChange(e){let t=e?Number(e):null;if(!t){this.filteredWebEmployees=[];return}this.addProjectService.getEmpListForWebByTechId(t).subscribe({next:o=>{this.filteredWebEmployees=o?.data||[],this.filteredWebEmployees.length===0&&H.default.fire({icon:"info",title:"No Employee Found",text:"No employee is available for this selected skill."})},error:o=>{this.filteredWebEmployees=[],H.default.fire({icon:"error",title:"Error",text:"Unable to fetch employee list. Please try again."})}})}onSelectWebEmployee(){let e=this.projectForm.get("webEmpId")?.value;if(console.log("Selected Web Employee ID:",e),!e)return;let t=Number(e);this.addProjectService.getProjectDetailsByEmpId(t).subscribe({next:o=>this.selectedEmployeeProjects=o?.data||[],error:()=>this.selectedEmployeeProjects=[]})}onSopFileChange(e){let t=e.target.files[0];if(!t)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)){H.default.fire({icon:"error",title:"Invalid File",text:"Upload only .pdf, .doc, .docx file!"}),this.sopFile.nativeElement.value="",this.newSopFile=null;return}this.newSopFile=t}onTechnicalFileChange(e){let t=e.target.files[0];if(!t)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)){H.default.fire({icon:"error",title:"Invalid File",text:"Upload only .pdf, .doc, .docx file!"}),this.technicalFile.nativeElement.value="",this.newTechnicalFile=null;return}this.newTechnicalFile=t}bindEditData(e){this.isEditMode=!0,this.editProjectId=e.id,this.existingSopPath=e.sopDocumentPath,this.existingTechnicalPath=e.technicalDocumentPath,this.projectForm.patchValue({id:e.id,category:e.category,projectTitle:e.projectTitle,description:e.description,startDate:e.startDate?.split("T")[0],assignDate:e.assignDate?.split("T")[0],endDate:e.endDate?.split("T")[0],completionDate:e.completionDate?.split("T")[0],isMobileSoftware:e.app==="App",isWebSoftware:e.web==="Web"||e.category==="Website",isAndroid:e.androidApp==="Android",isIOS:e.iosApp==="IOS",SEO:e.seo,SMO:e.smo,GMB:e.gmb,paidAds:e.paidAds}),this.existingSopPath=e.sopDocumentPath,this.existingTechnicalPath=e.technicalDocumentPath,e.appTechnology&&(this.projectForm.patchValue({mobileSkill:e.appTechnology}),this.addProjectService.getEmpListForAppByTechId(e.appTechnology).subscribe(t=>{this.filteredMobileEmployees=t?.data||[],this.projectForm.patchValue({mobileEmpId:e.appEmpId})})),e.webTechnology&&(this.projectForm.patchValue({webSkill:e.webTechnology}),this.addProjectService.getEmpListForWebByTechId(e.webTechnology).subscribe(t=>{this.filteredWebEmployees=t?.data||[],this.projectForm.patchValue({webEmpId:e.webEmpId})}))}submitProject(){if(this.projectForm.invalid)if(this.isEditMode&&this.existingSopPath)console.log("Edit mode: allowing submit with existing SOP");else{H.default.fire({icon:"warning",title:"Required Fields Missing",text:"Please fill required fields"});return}let e=new FormData,t=this.projectForm.value;if(t.isMobileSoftware&&!t.isAndroid&&!t.isIOS){H.default.fire({icon:"warning",title:"Selection Required",text:"Please select at least one: Android or iOS"});return}e.append("id",this.editProjectId.toString()),e.append("category",t.category),e.append("projectTitle",t.projectTitle),e.append("description",t.description||""),e.append("startDate",t.startDate),e.append("assignDate",t.assignDate),e.append("endDate",t.endDate||""),e.append("completionDate",t.completionDate||""),t.isMobileSoftware&&(e.append("app","App"),t.isAndroid&&e.append("androidApp","Android"),t.isIOS&&e.append("iosApp","IOS"),t.mobileSkill&&e.append("appTechnology",t.mobileSkill),t.mobileEmpId&&e.append("appEmpId",t.mobileEmpId)),t.isWebSoftware&&(e.append("web","Web"),t.webSkill&&e.append("webTechnology",t.webSkill),t.webEmpId&&e.append("webEmpId",t.webEmpId)),t.category==="Digital Marketing"&&(e.append("SEO",t.SEO||""),e.append("SMO",t.SMO||""),e.append("GMB",t.GMB||""),e.append("paidAds",t.paidAds||"")),this.newSopFile&&e.append("sopDocument",this.newSopFile),this.newTechnicalFile&&e.append("technicalDocument",this.newTechnicalFile),this.addProjectService.addProject(e).subscribe({next:o=>{o.success?(H.default.fire({icon:"success",title:"Project Added",text:o.message,confirmButtonColor:"#3085d6"}),this.projectForm.reset(),this.sopFile.nativeElement.value="",this.technicalFile.nativeElement.value="",this.selectedEmployeeProjects=[]):H.default.fire({icon:"error",title:"Error",text:o.message||"Error adding project"})},error:o=>{let m="Something went wrong!";o?.error&&(typeof o.error=="string"?m=o.error:o.error.message&&(m=o.error.message)),H.default.fire({icon:"error",title:"Validation Error",text:m})}})}formatDate(e){let t=e.getFullYear(),o=("0"+(e.getMonth()+1)).slice(-2),m=("0"+e.getDate()).slice(-2);return`${t}-${o}-${m}`}resetIfBefore(e,t){let o=this.projectForm.get(e)?.value;o&&new Date(o)<t&&this.projectForm.patchValue({[e]:""})}static \u0275fac=function(t){return new(t||a)(y(N),y(At),y(Ee),y(Z))};static \u0275cmp=C({type:a,selectors:[["app-add-project"]],viewQuery:function(t,o){if(t&1&&(O(en,5),O(tn,5)),t&2){let m;V(m=R())&&(o.sopFile=m.first),V(m=R())&&(o.technicalFile=m.first)}},standalone:!1,decls:71,vars:12,consts:[["sopFile",""],["technicalFile",""],[1,"max-w-7xl","mx-auto","bg-gray-100","p-4"],[3,"formGroup"],[1,"bg-white","p-6","rounded-lg","shadow"],[1,"bg-[#C5192F]","px-6","py-2","text-white","text-lg","font-semibold","shadow-md","rounded-t-md"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mt-5"],[1,"relative"],["formControlName","category",1,"peer","w-full","appearance-none","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["value","","disabled","","hidden",""],["value","Software"],["value","Website"],["value","Digital Marketing"],[1,"absolute","left-3","top-2","text-sm","text-gray-500","bg-white","px-1","transition-all","peer-focus:-top-2","peer-focus:text-xs","peer-valid:-top-2","peer-valid:text-xs"],[1,"text-red-500","text-[16px]","font-medium"],[1,"absolute","right-3","top-2","text-gray-400","pointer-events-none"],[1,"fa-solid","fa-angle-down"],["type","text","formControlName","projectTitle","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],[1,"relative","col-span-2"],["rows","1","formControlName","description","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none","resize-none"],["type","date","formControlName","startDate","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["type","date","formControlName","assignDate","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none",3,"min"],["type","date","formControlName","endDate","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none",3,"min"],["type","date","formControlName","completionDate","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-4","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none",3,"min"],[1,"block","text-sm","font-medium","text-gray-500","mb-1"],["type","file",1,"w-full","text-sm","text-gray-700","file:mr-4","file:py-2","file:px-3","file:border-0","file:text-sm","file:font-semibold","file:bg-[#C5192F]","file:text-white","hover:file:bg-[#a41526]","cursor-pointer","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]/30",3,"change"],["class","relative",4,"ngIf"],[1,"mt-6","border-t","pt-4"],[1,"mt-2","mb-4"],["class","font-semibold mb-2",4,"ngIf"],[1,"flex","gap-6"],["class","flex items-center gap-2",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-6 border-t pt-4 bg-white p-4 rounded-lg shadow",4,"ngIf"],["class","mt-6",4,"ngIf"],[1,"flex","justify-end","mt-6"],["type","button",1,"bg-green-600","text-white","font-semibold","px-6","py-2.5","rounded-md","shadow-md","hover:bg-green-700","transition",3,"click"],[1,"font-semibold","mb-2"],[1,"flex","items-center","gap-2"],["type","checkbox","formControlName","isMobileSoftware"],["type","checkbox","formControlName","isWebSoftware"],[1,"mt-4"],[1,"flex","gap-4"],["type","checkbox","formControlName","isAndroid"],["type","checkbox","formControlName","isIOS"],[1,"relative","mt-3"],["formControlName","mobileSkill",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["class","relative mt-3",4,"ngIf"],[3,"ngValue"],["formControlName","mobileEmpId",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","webSkill",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["formControlName","webEmpId",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none",3,"change"],[1,"mt-6","border-t","pt-4","bg-white","p-4","rounded-lg","shadow"],[1,"text-lg","font-semibold","mb-4","text-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],["type","text","formControlName","SEO","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["type","text","formControlName","SMO","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["type","text","formControlName","GMB","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],["type","text","formControlName","paidAds","placeholder"," ",1,"peer","w-full","rounded-md","border","border-gray-300","px-3","py-2","text-sm","text-gray-700","focus:border-[#C5192F]","focus:ring-2","focus:ring-[#C5192F]/30","outline-none"],[1,"mt-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white rounded-xl shadow-md border hover:shadow-lg transition",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","shadow-md","border","hover:shadow-lg","transition"],[1,"bg-[#C5192F]","text-white","px-4","py-2","rounded-t-xl"],[1,"font-semibold","truncate"],[1,"p-4","space-y-2","text-sm","text-gray-700"],[1,"flex","justify-between"],[1,"font-medium"]],template:function(t,o){if(t&1){let m=w();i(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5),r(4," Add Project "),n(),i(5,"div",6)(6,"div",7)(7,"select",8)(8,"option",9),r(9,"Select Category"),n(),i(10,"option",10),r(11,"Software"),n(),i(12,"option",11),r(13,"Website"),n(),i(14,"option",12),r(15,"Digital Marketing"),n()(),i(16,"label",13),r(17," Project Category "),i(18,"span",14),r(19,"*"),n()(),i(20,"span",15),s(21,"i",16),n()(),i(22,"div",7),s(23,"input",17),i(24,"label",13),r(25," Project Title "),i(26,"span",14),r(27,"*"),n()()(),i(28,"div",18),s(29,"textarea",19),i(30,"label",13),r(31," Description "),n()(),i(32,"div",7),s(33,"input",20),i(34,"label",13),r(35," Start Date "),i(36,"span",14),r(37,"*"),n()()(),i(38,"div",7),s(39,"input",21),i(40,"label",13),r(41," Assign Date "),i(42,"span",14),r(43,"*"),n()()(),i(44,"div",7),s(45,"input",22),i(46,"label",13),r(47," End Date "),n()(),i(48,"div",7),s(49,"input",23),i(50,"label",13),r(51," Completion Date "),n()(),i(52,"div",7)(53,"label",24),r(54,"SOW Document"),n(),i(55,"input",25,0),g("change",function(_){return x(m),h(o.onSopFileChange(_))}),n()(),p(57,nn,5,0,"div",26),n(),i(58,"div",27)(59,"div",28),p(60,an,2,0,"h4",29),i(61,"div",30),p(62,on,3,0,"label",31)(63,rn,3,0,"label",31),n()(),p(64,dn,20,2,"div",32)(65,fn,13,2,"div",32),n(),p(66,gn,20,0,"div",33)(67,hn,5,1,"div",34),i(68,"div",35)(69,"button",36),g("click",function(){return x(m),h(o.submitProject())}),r(70," Submit Project "),n()()()()()}t&2&&(l(),d("formGroup",o.projectForm),l(38),d("min",o.minAssignDate),l(6),d("min",o.minEndDate),l(4),d("min",o.minCompletionDate),l(8),d("ngIf",o.category!=="Digital Marketing"),l(3),d("ngIf",o.category==="Software"||o.category==="Website"),l(2),d("ngIf",o.category==="Software"),l(),d("ngIf",o.category==="Software"||o.category==="Website"),l(),d("ngIf",o.isMobileSoftware&&o.category==="Software"),l(),d("ngIf",o.isWebSoftware),l(),d("ngIf",o.category==="Digital Marketing"),l(),d("ngIf",o.selectedEmployeeProjects.length))},dependencies:[I,k,L,z,q,M,Ve,W,D,A,P,j,K],styles:[".project-card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.project-card[_ngcontent-%COMP%]{width:80%;background:#fff;border-radius:12px;box-shadow:0 4px 10px #0000001a;padding:20px;border-left:6px solid #C5192F}.card-title[_ngcontent-%COMP%]{margin-bottom:15px;color:#c5192f}.section[_ngcontent-%COMP%]{margin-top:15px;padding-top:10px;border-top:1px solid #ddd}.card-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0}.label[_ngcontent-%COMP%]{font-weight:600;color:#555}.value[_ngcontent-%COMP%]{color:#222}"]})};var pt=G(ee());function yn(a,e){if(a&1&&(i(0,"option",22),r(1),n()),a&2){let t=e.$implicit;d("ngValue",t),l(),v(" ",t.empName," ")}}var Ge=class a{constructor(e,t,o){this.fb=e;this.empservice=t;this.taskService=o}taskForm;employees=[];editTask=null;attachment1=null;attachment2=null;attachment1Name="";attachment2Name="";totalRecords;dataSource;ngOnInit(){this.taskForm=this.fb.group({id:[""],title:["",E.required],employee:["",E.required],completionDate:["",E.required],description:["",E.required]}),this.loadEmployees();let e=history.state;console.log("state",e),e&&e.task&&(this.editTask=e.task,this.bindEditData())}onDragOver(e){e.preventDefault(),e.stopPropagation()}onFileDrop(e,t){e.preventDefault(),e.stopPropagation();let o=e.dataTransfer?.files[0];o&&(t===1?(this.attachment1=o,this.attachment1Name=o?o.name:""):t===2&&(this.attachment2=o,this.attachment2Name=o?o.name:""))}onFileSelect(e,t){let o=e.target.files[0];o&&(t===1?(this.attachment1=o,this.attachment1Name=o?o.name:""):t===2&&(this.attachment2=o,this.attachment2Name=o?o.name:""))}submit(){if(this.taskForm.invalid)return;let e=this.taskForm.getRawValue(),t={id:this.editTask?.id??0,title:e.title,description:e.description,CompletedDate:e.completionDate,empId:e.employee?.id,empName:e.employee?.empName},o=new FormData;o.append("id",t.id.toString()),o.append("empId",t.empId),o.append("empName",t.empName),o.append("title",t.title),o.append("description",t.description),o.append("CompletedDate",t.CompletedDate),this.attachment1?(o.append("document1",this.attachment1),o.append("document1Path",this.attachment1Name)):this.attachment1Name&&o.append("document1Path",this.attachment1Name),this.attachment2?(o.append("document2",this.attachment2),o.append("document2Path",this.attachment2Name)):this.attachment2Name&&o.append("document2Path",this.attachment2Name);for(let m of o.entries())console.log(m[0]+":",m[1]);this.taskService.addTask(o).subscribe({next:m=>he(this,null,function*(){console.log(m),yield pt.default.fire({title:"Success!",text:"Task saved successfully",icon:"success",confirmButtonText:"OK"}),this.taskForm.reset(),this.attachment1=null,this.attachment2=null,this.attachment1Name="",this.attachment2Name="",this.editTask=null}),error:m=>{console.error(m),pt.default.fire({title:"Error!",text:m?.error?.message||"Failed to save task",icon:"error",confirmButtonText:"OK"})}})}loadEmployees(e=1,t=10,o=""){this.empservice.getAllEmployees(e,t,o).subscribe(m=>{m.success&&(this.employees=m.data,console.log("RES",this.employees)),this.editTask&&this.bindEditData()})}bindEditData(){this.attachment1Name=this.editTask.document1Path,this.attachment2Name=this.editTask.document2Path,this.taskForm.patchValue({id:this.editTask?.id??0,title:this.editTask.title,description:this.editTask.description,completionDate:this.editTask.completedDate?this.editTask.completedDate.substring(0,10):"",employee:this.employees.find(e=>e.id==this.editTask.empId)}),this.attachment1Name=this.editTask.document1Path||"",this.attachment2Name=this.editTask.document2Path||""}static \u0275fac=function(t){return new(t||a)(y(N),y(be),y(Re))};static \u0275cmp=C({type:a,selectors:[["app-add-task"]],standalone:!1,decls:39,vars:4,consts:[["fileInput1",""],["fileInput2",""],[1,"max-w-5xl","mx-auto","bg-white","shadow-xl","rounded-xl","pt-3","py-10","p-6","mt-2"],[1,"text-sm","font-semibold","text-gray-700","mb-1","border-b","border-gray-200","pb-2"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-1"],[1,"flex","flex-col","w-full"],[1,"text-gray-500","text-sm","mb-1"],["type","text","formControlName","title","placeholder","Enter task title",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-700","focus:ring-1","focus:ring-[#dd3d4f]","focus:outline-none"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2","mt-1"],["formControlName","employee",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-700","focus:ring-1","focus:ring-[#dd3d4f]","focus:outline-none"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["type","date","formControlName","completionDate",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-700","focus:ring-1","focus:ring-[#dd3d4f]","focus:outline-none"],[1,"flex","flex-col"],["rows","3","formControlName","description","placeholder","Enter task description",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-700","focus:ring-1","focus:ring-[#dd3d4f]","focus:outline-none"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","flex-col","items-center","justify-center","h-20","p-3","border-2","border-dashed","border-gray-300","rounded-lg","cursor-pointer","hover:border-[#dd3d4f]","hover:bg-gray-50","transition-all","duration-150",3,"dragover","drop","click"],[1,"text-gray-400","text-sm","text-center"],["type","file","hidden","",3,"change"],[1,"flex","justify-end"],["type","submit",1,"bg-[#dd3d4f]","hover:bg-red-600","text-white","font-medium","px-6","py-2","rounded-lg","shadow-md","transition-all"],[3,"ngValue"]],template:function(t,o){if(t&1){let m=w();i(0,"div",2)(1,"h2",3),r(2," Add Task "),n(),i(3,"form",4),g("ngSubmit",function(){return x(m),h(o.submit())}),i(4,"div",5)(5,"div",6)(6,"label",7),r(7,"Task Title"),n(),s(8,"input",8),n()(),i(9,"div",9)(10,"div",6)(11,"label",7),r(12,"Assign Employee"),n(),i(13,"select",10)(14,"option",11),r(15,"Select Employee"),n(),p(16,yn,2,2,"option",12),n()(),i(17,"div",6)(18,"label",7),r(19,"Completion Date"),n(),s(20,"input",13),n()(),i(21,"div",14)(22,"label",7),r(23,"Description"),n(),s(24,"textarea",15),n(),i(25,"div",16)(26,"div",17),g("dragover",function(_){return x(m),h(o.onDragOver(_))})("drop",function(_){return x(m),h(o.onFileDrop(_,1))})("click",function(){x(m);let _=fe(30);return h(_.click())}),i(27,"p",18),r(28),n(),i(29,"input",19,0),g("change",function(_){return x(m),h(o.onFileSelect(_,1))}),n()(),i(31,"div",17),g("dragover",function(_){return x(m),h(o.onDragOver(_))})("drop",function(_){return x(m),h(o.onFileDrop(_,2))})("click",function(){x(m);let _=fe(35);return h(_.click())}),i(32,"p",18),r(33),n(),i(34,"input",19,1),g("change",function(_){return x(m),h(o.onFileSelect(_,2))}),n()()(),i(36,"div",20)(37,"button",21),r(38," Submit Task "),n()()()()}t&2&&(l(3),d("formGroup",o.taskForm),l(13),d("ngForOf",o.employees),l(12),v(" ",(o.attachment1==null?null:o.attachment1.name)||"Drag & Drop or Click Attachment 1"," "),l(5),v(" ",(o.attachment2==null?null:o.attachment2.name)||"Drag & Drop or Click Attachment 2"," "))},dependencies:[I,L,z,q,M,W,D,A,P,j],encapsulation:2})};var Je=G(ee());var Te=class{constructor(e,t){this.fetchFn=t;this.size=e}items=[];page=1;size;totalPages=0;loading=!1;hasMore=!0;load(e=""){this.loading||!this.hasMore||(this.loading=!0,this.fetchFn(e,this.page,this.size).subscribe({next:t=>{this.items.push(...t.data),this.totalPages=t.totalPages,this.hasMore=this.page<this.totalPages,this.page++,this.loading=!1},error:()=>{this.loading=!1}}))}reset(){this.items.length=0,this.page=1,this.totalPages=0,this.hasMore=!0}handleScroll(e,t="",o=80){let m=e.target;m.scrollTop+m.clientHeight>=m.scrollHeight-o&&this.load(t)}};var Qe=class a{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static \u0275fac=function(t){return new(t||a)(y(Tt,16))};static \u0275pipe=gt({name:"safeUrl",type:a,pure:!0})};var Sn=["filesTemplate"];function _n(a,e){if(a&1){let t=w();i(0,"button",9),g("click",function(){x(t);let m=f().$implicit,c=f();return h(c.openFiles(m.uploadedDocuments))}),ut(),i(1,"svg",10),s(2,"path",11)(3,"path",12),n()()}}function Cn(a,e){if(a&1&&p(0,_n,4,0,"button",8),a&2){let t=e.$implicit;d("ngIf",t.uploadedDocuments==null?null:t.uploadedDocuments.length)}}function wn(a,e){if(a&1&&(b(0),s(1,"iframe",21),B(2,"safeUrl"),S()),a&2){let t=e.$implicit;l(),d("src",bt(2,1,t),ft)}}function En(a,e){a&1&&(i(0,"p",22),r(1," No documents available "),n())}function Tn(a,e){if(a&1){let t=w();i(0,"div",13)(1,"div",14)(2,"div",15)(3,"h3",16),r(4,"Documents"),n(),i(5,"button",17),g("click",function(){x(t);let m=f();return h(m.closeFiles())}),r(6,"\u2715"),n()(),i(7,"div",18),p(8,wn,3,3,"ng-container",19)(9,En,2,0,"p",20),n()()()}if(a&2){let t=f();l(8),d("ngForOf",t.selectedDocuments),l(),d("ngIf",!t.selectedDocuments.length)}}var Ye=class a{constructor(e,t,o){this.fb=e;this.taskService=t;this.router=o}searchForm;paginator;filesTemplate;showFilesModal=!1;selectedDocuments=[];taskColumns;pdfUrl="https://localhost:7253/";ngOnInit(){this.searchForm=this.fb.group({search:[""]}),this.taskColumns=[{key:"title",label:"Task"},{key:"empName",label:"Assigned To"},{key:"assignedByName",label:"Assigned By"},{key:"assignedDate",label:"Assigned Date",type:"date",align:"center"},{key:"completedDate",label:"Completion Date",type:"date",align:"center"},{key:"taskStatus",label:"Status"},{key:"uploadedDocuments",label:"Files",align:"right",type:"custom",template:this.filesTemplate}],this.paginator=new Te(20,(e,t,o)=>this.taskService.getTasks(e,t,o)),this.paginator.load(),setTimeout(()=>{console.log("data",this.tasks)},1e3),this.searchForm.get("search").valueChanges.pipe(ve(400),ye()).subscribe(e=>{this.paginator.reset(),this.paginator.load(e)})}ngAfterViewInit(){this.taskColumns=[{key:"title",label:"Task"},{key:"empName",label:"Assigned To"},{key:"assignedByName",label:"Assigned By"},{key:"assignedDate",label:"Assigned Date",type:"date",align:"center"},{key:"completedDate",label:"Completion Date",type:"date",align:"center"},{key:"taskStatus",label:"Status"},{key:"uploadedDocuments",label:"Files",align:"center",template:this.filesTemplate}]}get tasks(){return this.paginator.items.map(e=>Me(ke({},e),{uploadedDocuments:[e.document1Path,e.document2Path].filter(t=>!!t)}))}openFiles(e=[]){e.length&&(this.selectedDocuments=e.map(t=>`${this.pdfUrl}${t}`),this.showFilesModal=!0)}closeFiles(){this.selectedDocuments=[],this.showFilesModal=!1}onScroll(e){this.paginator.handleScroll(e,this.searchForm.value.search)}onEdit(e){this.router.navigate(["/home/admin/add-task"],{state:{task:e}})}onDelete(e){Je.default.fire({title:"Are you sure?",text:`Delete task "${e.title}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&this.taskService.deleteTask(e.id).subscribe({next:()=>{Je.default.fire("Deleted!","Task has been deleted.","success"),this.paginator.reset(),this.paginator.load(this.searchForm.value.search)},error:o=>{Je.default.fire("Error",o?.error?.message||"Failed to delete task","error")}})})}static \u0275fac=function(t){return new(t||a)(y(N),y(Re),y(Z))};static \u0275cmp=C({type:a,selectors:[["app-view-task"]],viewQuery:function(t,o){if(t&1&&O(Sn,7),t&2){let m;V(m=R())&&(o.filesTemplate=m.first)}},standalone:!1,decls:10,vars:5,consts:[["filesTemplate",""],[1,"bg-white","rounded-2xl","shadow-sm","ms-6","px-4","md:px-6","py-4","mx-3","md:mx-auto","max-w-7xl","font-[Poppins]"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-3","mb-3"],[1,"text-sm","font-semibold","text-gray-700"],[1,"relative","w-full","md:w-60",3,"formGroup"],["type","text","formControlName","search","placeholder","Search Task",1,"w-full","h-8","rounded-lg","border","border-gray-300","pl-8","pr-3","text-[12px]","text-gray-700","placeholder:text-gray-400","focus:outline-none","focus:ring-1","focus:ring-[#dd3d4f]","focus:border-[#dd3d4f]"],[3,"tableScroll","edit","delete","columns","data","loading"],["class","fixed inset-0 bg-black/40 flex items-center justify-center z-50",4,"ngIf"],["class",`w-7 h-7 flex items-center justify-center rounded
           text-gray-600 hover:text-blue-600  hover:bg-gray-100`,"title","View Documents",3,"click",4,"ngIf"],["title","View Documents",1,"w-7","h-7","flex","items-center","justify-center","rounded","text-gray-600","hover:text-blue-600","hover:bg-gray-100",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","ms-3"],["d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["d",`M2.458 12C3.732 7.943 7.523 5 12 5
               c4.478 0 8.268 2.943 9.542 7
               -1.274 4.057-5.064 7-9.542 7
               -4.477 0-8.268-2.943-9.542-7z`],[1,"fixed","inset-0","bg-black/40","flex","items-center","justify-center","z-50"],[1,"bg-white","w-[80%]","h-[80%]","rounded-xl","shadow-xl","flex","flex-col"],[1,"flex","justify-between","items-center","px-4","py-2","border-b"],[1,"font-semibold"],[1,"text-gray-500","hover:text-red-500",3,"click"],[1,"flex-1","overflow-auto","p-4","space-y-4"],[4,"ngFor","ngForOf"],["class","text-center text-gray-400",4,"ngIf"],[1,"w-full","h-[400px]","border","rounded",3,"src"],[1,"text-center","text-gray-400"]],template:function(t,o){if(t&1){let m=w();i(0,"div",1)(1,"div",2)(2,"h2",3),r(3,"Task List"),n(),i(4,"form",4),s(5,"input",5),n()(),i(6,"app-generic-table",6),g("tableScroll",function(_){return x(m),h(o.onScroll(_))})("edit",function(_){return x(m),h(o.onEdit(_))})("delete",function(_){return x(m),h(o.onDelete(_))}),n()(),p(7,Cn,1,1,"ng-template",null,0,Oe)(9,Tn,10,2,"div",7)}t&2&&(l(4),d("formGroup",o.searchForm),l(2),d("columns",o.taskColumns)("data",o.tasks)("loading",o.paginator.loading),l(3),d("ngIf",o.showFilesModal))},dependencies:[I,k,L,M,D,A,P,j,_e,Qe],encapsulation:2})};var Xe=G(ee());var Ke=class a{constructor(e){this.http=e}baseUrl=te.apiUrl;getProjects(e,t,o){let m=new Et().set("searchTerm",e).set("pageNumber",t).set("pageSize",o);return this.http.get(`${this.baseUrl}Admin/getAllProject`,{params:m})}delete(e){let t=new wt({"X-Skip-Global-Loader":"true"});return this.http.delete(`${this.baseUrl}Admin/deleteProjectById?id=${e}`,{headers:t})}static \u0275fac=function(t){return new(t||a)(J(X))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ze=class a{constructor(e,t,o,m){this.fb=e;this.projectService=t;this.router=o;this.addProjectService=m}searchForm;paginator;projectColumns=[{key:"projectTitle",label:"Project",clickable:!0,route:"/home/admin/project-details"},{key:"category",label:"Category"},{key:"startDate",label:"Start Date",type:"date",align:"center"},{key:"completionDate",label:"Completion Date",type:"date",align:"center"},{key:"endDate",label:"Delivery Date",type:"date",align:"center"},{key:"appEmpName",label:"App Employee"},{key:"webEmpName",label:"Web Employee"},{key:"delayedDays",label:"Delay",align:"center"}];ngOnInit(){this.searchForm=this.fb.group({search:[""]}),this.paginator=new Te(30,(e,t,o)=>this.projectService.getProjects(e,t,o)),this.paginator.load(),this.searchForm.get("search").valueChanges.pipe(ve(400),ye()).subscribe(e=>{this.paginator.reset(),this.paginator.load(e)})}onScroll(e){this.paginator.handleScroll(e,this.searchForm.value.search)}edit(e){this.router.navigate(["/home/admin/add-project"],{state:{project:e}})}Delete(e){Xe.default.fire({title:"Are you sure?",text:`Delete project "${e.projectTitle}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete"}).then(t=>{t.isConfirmed&&this.projectService.delete(e.id).subscribe({next:()=>{Xe.default.fire("Deleted!","Project has been deleted.","success"),this.paginator.reset(),this.paginator.load(this.searchForm.value.search)},error:o=>{Xe.default.fire("Error",o?.error?.message||"Failed to delete project","error")}})})}static \u0275fac=function(t){return new(t||a)(y(N),y(Ke),y(Z),y(Ee))};static \u0275cmp=C({type:a,selectors:[["app-view-project"]],standalone:!1,decls:7,vars:4,consts:[[1,"bg-white","rounded-2xl","shadow-sm","mt-1","px-4","md:px-6","py-4","md:mx-auto","max-w-6xl","font-[Poppins]"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-3","mb-3"],[1,"text-sm","font-semibold","text-gray-700"],[1,"relative","w-full","md:w-60",3,"formGroup"],["type","text","formControlName","search","placeholder","Search projects",1,"w-full","h-8","rounded-lg","border","border-gray-300","pl-8","pr-3","text-[12px]","text-gray-700","placeholder:text-gray-400","focus:outline-none","focus:ring-1","focus:ring-[#dd3d4f]","focus:border-[#dd3d4f]"],[3,"edit","delete","tableScroll","columns","data","loading"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Project List"),n(),i(4,"form",3),s(5,"input",4),n()(),i(6,"app-generic-table",5),g("edit",function(c){return o.edit(c)})("delete",function(c){return o.Delete(c)})("tableScroll",function(c){return o.onScroll(c)}),n()()),t&2&&(l(4),d("formGroup",o.searchForm),l(2),d("columns",o.projectColumns)("data",o.paginator.items)("loading",o.paginator.loading))},dependencies:[L,M,D,A,P,j,_e],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}"]})};var xe=G(ee());var et=class a{constructor(e){this.http=e}apiUrl=te.apiUrl;downloadFile(e){return this.http.get(`${this.apiUrl}Common/download-file`,{params:{filePath:e},responseType:"blob"})}static \u0275fac=function(t){return new(t||a)(J(X))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var In=()=>[10,20,30];function kn(a,e){a&1&&(i(0,"th",31),r(1," Sr No. "),n())}function Mn(a,e){if(a&1&&(i(0,"td",32),r(1),n()),a&2){let t=e.index,o=f();l(),v(" ",(o.pageNumber-1)*o.pageSize+t+1," ")}}function An(a,e){a&1&&(i(0,"th",33),r(1,"Name "),n())}function Ln(a,e){if(a&1&&(i(0,"td",34),r(1),n()),a&2){let t=e.$implicit;l(),u(t.empName)}}function Pn(a,e){a&1&&(i(0,"th",35),r(1,"Leave"),n())}function jn(a,e){if(a&1&&(i(0,"td",34),r(1),n()),a&2){let t=e.$implicit;l(),u(t.leaveName)}}function Nn(a,e){a&1&&(i(0,"th",33),r(1,"From Date"),n())}function On(a,e){if(a&1&&(i(0,"td",34),r(1),B(2,"date"),n()),a&2){let t=e.$implicit;l(),v(" ",$(2,1,t.fromDate,"dd-MM-yyyy")," ")}}function Vn(a,e){a&1&&(i(0,"th",33),r(1,"To Date "),n())}function Rn(a,e){if(a&1&&(i(0,"td",34),r(1),B(2,"date"),n()),a&2){let t=e.$implicit;l(),v(" ",$(2,1,t.toDate,"dd-MM-yyyy")," ")}}function Bn(a,e){a&1&&(i(0,"th",36),r(1,"Document"),n())}function zn(a,e){if(a&1){let t=w();i(0,"td",34)(1,"button",37),g("click",function(){let m=x(t).$implicit,c=f();return h(c.downloadFile(m.fileName))}),s(2,"i",38),n()()}}function qn(a,e){a&1&&(i(0,"th",39),r(1," Description"),n())}function Un(a,e){if(a&1&&(i(0,"td",34),r(1),n()),a&2){let t=e.$implicit;l(),u(t.description)}}function Hn(a,e){a&1&&(i(0,"th",40),r(1," Action"),n())}function $n(a,e){if(a&1){let t=w();i(0,"div")(1,"button",45),g("click",function(){x(t);let m=f().$implicit,c=f();return h(c.ApproveLeave(m.id))}),s(2,"i",46),n(),r(3," | "),i(4,"button",47),g("click",function(){x(t);let m=f().$implicit,c=f();return h(c.openModal(m.id))}),s(5,"i",48),n()()}}function Wn(a,e){if(a&1&&(i(0,"span",49),r(1),n()),a&2){let t=f().$implicit;l(),v(" ",t.status," ")}}function Gn(a,e){if(a&1){let t=w();i(0,"a",50),g("click",function(){x(t);let m=f().$implicit,c=f();return h(c.openReasonModal(m.id))}),r(1),n()}if(a&2){let t=f().$implicit;l(),v(" ",t.status," ")}}function Qn(a,e){if(a&1&&(i(0,"td",41),p(1,$n,6,0,"div",42)(2,Wn,2,1,"span",43)(3,Gn,2,1,"a",44),n()),a&2){let t=e.$implicit;l(),d("ngIf",t.statuscode==0),l(),d("ngIf",t.statuscode==1),l(),d("ngIf",t.statuscode==2)}}function Jn(a,e){a&1&&s(0,"tr",51)}function Yn(a,e){a&1&&s(0,"tr",52)}function Kn(a,e){if(a&1){let t=w();i(0,"div",53)(1,"div",54)(2,"button",55),g("click",function(){x(t);let m=f();return h(m.closeModal())}),s(3,"i",56),n(),i(4,"div",57)(5,"h2",58),r(6," Reject Leave "),n()(),i(7,"form",59),g("ngSubmit",function(){x(t);let m=f();return h(m.onSubmitStatus())}),i(8,"div")(9,"label",60),r(10," Reason "),n(),s(11,"input",61),n(),i(12,"div",62)(13,"button",63),r(14," Submit "),n()()()()()}if(a&2){let t=f();l(7),d("formGroup",t.statusForm),l(6),d("disabled",t.statusForm.invalid)}}function Xn(a,e){if(a&1){let t=w();i(0,"div",53)(1,"div",54)(2,"button",55),g("click",function(){x(t);let m=f();return h(m.closeModal())}),s(3,"i",56),n(),i(4,"div",57)(5,"h2",58),r(6," Reason "),n()(),i(7,"div",64),r(8),n()()()}if(a&2){let t=f();l(8),v(" ",t.reason," ")}}var tt=class a{constructor(e,t,o){this.leaveService=e;this.fb=t;this.commonservice=o;this.statusForm=this.fb.group({id:null,reason:["",[E.required]]})}displayedColumns=["srNo","name","leaveName","fromDate","toDate","document","description","action"];dataSource=new ce([]);pageNumber=1;pageSize=10;totalRecords=0;searchTerm="";allLeaves=[];reason="";isReasonModal=!1;pageSizeControl=new ot("10");searchControl=new ot("");paginator;isModalOpen=!1;statusForm;openModal(e){let t=this.allLeaves.find(o=>o.id===e);t&&(this.statusForm.get("leaveCount")?.setValue(t.leaveCount),this.statusForm.get("id")?.setValue(t.id),this.isModalOpen=!0)}openReasonModal(e){let t=this.allLeaves.find(o=>o.id===e);t&&(this.reason=t.reason,this.isReasonModal=!0)}closeModal(){this.isModalOpen=!1,this.isReasonModal=!1,this.statusForm.reset()}ApproveLeave(e){debugger;e>0&&this.leaveService.UpdateLeaveStatus(e,1,null).subscribe({next:t=>{t.status?xe.default.fire({title:"Success",text:t.message,icon:"success",didClose:()=>{location.reload()}}):xe.default.fire("Error",t.message,"error")},error:t=>{xe.default.fire("Error",t.error.errorMessage,"error")}})}onSubmitStatus(){if(!this.statusForm.valid)return;let e=this.statusForm.value;this.leaveService.UpdateLeaveStatus(e.id,2,e.reason).subscribe({next:t=>{t.status?xe.default.fire({title:"Success",text:t.message,icon:"success",didClose:()=>{this.closeModal(),location.reload()}}):xe.default.fire("Error",t.message,"error")},error:t=>{xe.default.fire("Error",t.error.errorMessage,"error")}})}ngOnInit(){this.loadAssignedLeaves(),this.searchControl.valueChanges.pipe(ve(400),ye()).subscribe(e=>{this.searchTerm=e?.trim()||"",this.pageNumber=1,this.loadAssignedLeaves()})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadAssignedLeaves()}loadAssignedLeaves(){this.leaveService.getAllLeaveRequests(this.searchTerm,this.pageNumber,this.pageSize).subscribe({next:e=>{e.success&&(this.allLeaves=e.data,this.dataSource.data=e.data,this.totalRecords=e.totalRecords)}})}downloadFile(e){this.commonservice.downloadFile(e).subscribe({next:t=>{let o=URL.createObjectURL(t),m=document.createElement("a");m.href=o,m.download=e.split("/").pop(),m.click(),URL.revokeObjectURL(o)},error:()=>{alert("File download failed")}})}static \u0275fac=function(t){return new(t||a)(y(Se),y(N),y(et))};static \u0275cmp=C({type:a,selectors:[["app-leave-requests"]],viewQuery:function(t,o){if(t&1&&O(F,5),t&2){let m;V(m=R())&&(o.paginator=m.first)}},standalone:!1,decls:40,vars:11,consts:[[1,"bg-gray-50","p-2","md:p-2"],[1,"bg-white","shadow","rounded-lg","p-1"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-1","mb-1"],[1,"ml-2","text-lg","md:text-[16px]","font-semibold","text-[#444]","text-center","md:text-left"],[1,"flex","items-center","gap-2"],[1,"relative"],["type","text","placeholder","Search Employee",1,"w-full","pl-10","pr-3","py-[6px]","text-[12px]","rounded-lg","bg-[#F6F7FB]","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]","table-search",3,"formControl"],[1,"fa-solid","fa-magnifying-glass","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","text-sm"],["showFirstLastButtons","",3,"page","length","pageSize","pageIndex","pageSizeOptions"],[1,"relative","overflow-x-auto","w-full"],["mat-table","",1,"min-w-[700px]","w-full","border","border-gray-300","divide-y","divide-gray-300","table-fixed","text-sm","md:text-base",3,"dataSource"],["matColumnDef","srNo"],["mat-header-cell","","class","!w-[50px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center text-[12px]",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","w-[100px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leaveName"],["mat-header-cell","","class","w-[50px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["matColumnDef","fromDate"],["matColumnDef","toDate"],["matColumnDef","document"],["mat-header-cell","","class","w-[60px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["matColumnDef","description"],["mat-header-cell","","class","w-[70px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","class","w-[110px] text-center !bg-[#dd3d4f] border-r text-white",4,"matHeaderCellDef"],["mat-cell","","class","px-1 py-1 text-center",4,"matCellDef"],["mat-header-row","","class","!h-9",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-100 !h-9",4,"matRowDef","matRowDefColumns"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],["mat-header-cell","",1,"!w-[50px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-cell","",1,"text-center","text-[12px]"],["mat-header-cell","",1,"w-[100px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-cell",""],["mat-header-cell","",1,"w-[50px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-header-cell","",1,"w-[60px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-icon-button","","color","primary",3,"click"],[1,"fa-solid","fa-download","text-[#dd3d4f]"],["mat-header-cell","",1,"w-[70px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-header-cell","",1,"w-[110px]","text-center","!bg-[#dd3d4f]","border-r","text-white"],["mat-cell","",1,"px-1","py-1","text-center"],[4,"ngIf"],["class"," text-green-600",4,"ngIf"],["class","!cursor-pointer text-red-600",3,"click",4,"ngIf"],["title","Approve",1,"text-green-700","p-2","rounded-full","hover:bg-green-100","mr-1","text-[12px]",3,"click"],[1,"fa-solid","fa-check"],["title","Reject",1,"text-red-700","p-2","rounded-full","hover:bg-green-100","mr-1","text-[12px]",3,"click"],[1,"fa-solid","fa-remove"],[1,"text-green-600"],[1,"!cursor-pointer","text-red-600",3,"click"],["mat-header-row","",1,"!h-9"],["mat-row","",1,"hover:bg-gray-100","!h-9"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","w-full","max-w-md","rounded-lg","shadow-lg","relative"],["type","button",1,"absolute","top-3","right-3","text-gray-500","hover:text-red-600","text-lg",3,"click"],[1,"fa-solid","fa-xmark"],[1,"border-b","px-5","py-3"],[1,"text-lg","font-semibold","text-gray-700"],[1,"px-5","py-4","space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-600","mb-1"],["type","text","formControlName","reason",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-[#C5192F]"],[1,"flex","justify-center","gap-2","pt-3","border-t"],["type","submit",1,"px-4","py-2","text-sm","rounded-md","text-white","bg-[#C5192F]","hover:bg-[#b3162a]","disabled:opacity-50",3,"disabled"],[1,"p-4"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4," Leave Requests "),n(),i(5,"div",4)(6,"div",5),s(7,"input",6)(8,"i",7),n(),i(9,"mat-paginator",8),g("page",function(c){return o.onPageChange(c)}),n()()(),i(10,"div",9)(11,"table",10),b(12,11),p(13,kn,2,0,"th",12)(14,Mn,2,1,"td",13),S(),b(15,14),p(16,An,2,0,"th",15)(17,Ln,2,1,"td",16),S(),b(18,17),p(19,Pn,2,0,"th",18)(20,jn,2,1,"td",16),S(),b(21,19),p(22,Nn,2,0,"th",15)(23,On,3,4,"td",16),S(),b(24,20),p(25,Vn,2,0,"th",15)(26,Rn,3,4,"td",16),S(),b(27,21),p(28,Bn,2,0,"th",22)(29,zn,3,0,"td",16),S(),b(30,23),p(31,qn,2,0,"th",24)(32,Un,2,1,"td",16),S(),b(33,25),p(34,Hn,2,0,"th",26)(35,Qn,4,3,"td",27),S(),p(36,Jn,1,0,"tr",28)(37,Yn,1,0,"tr",29),n()()()(),p(38,Kn,15,2,"div",30)(39,Xn,9,1,"div",30)),t&2&&(l(7),d("formControl",o.searchControl),l(2),d("length",o.totalRecords)("pageSize",o.pageSize)("pageIndex",o.pageNumber-1)("pageSizeOptions",Y(10,In)),l(2),d("dataSource",o.dataSource),l(25),d("matHeaderRowDef",o.displayedColumns),l(),d("matRowDefColumns",o.displayedColumns),l(),d("ngIf",o.isModalOpen),l(),d("ngIf",o.isReasonModal))},dependencies:[k,L,M,D,A,ie,ae,me,oe,ne,se,re,le,de,pe,Nt,F,It,P,j,K],styles:[".mat-mdc-paginator-page-size-label{display:none!important}  .mat-mdc-paginator-range-label{display:none!important}  .mat-mdc-paginator-page-size-select{width:65px!important;min-width:55px!important}  .mat-mdc-select-trigger{height:22px!important;font-size:13px!important}"]})};function Zn(a,e){if(a&1&&(i(0,"a",36),r(1,"Download"),n()),a&2){let t=f();d("href",t.employee.panAttachment,De)}}function ea(a,e){if(a&1&&(i(0,"a",36),r(1,"Download"),n()),a&2){let t=f();d("href",t.employee.aadhaarAttachment,De)}}function ta(a,e){if(a&1&&(i(0,"a",41),r(1,"Download"),n()),a&2){let t=f().$implicit;d("href",t.attachment,De)}}function ia(a,e){if(a&1&&(i(0,"div")(1,"p",39),r(2),n(),p(3,ta,2,1,"a",40),n()),a&2){let t=e.$implicit;l(2),vt("",t.degree," - ",t.institution," (",t.year,")"),l(),d("ngIf",t.attachment)}}function na(a,e){if(a&1&&(i(0,"div",37),p(1,ia,4,4,"div",38),n()),a&2){let t=f();l(),d("ngForOf",t.employee.qualifications)}}function aa(a,e){a&1&&(i(0,"p",42),r(1,"No qualifications available"),n())}var it=class a{employee={name:"Mimansa",empCode:"123",dob:"2000-01-20",age:26,gender:"Female",nationality:"Indian",maritalStatus:"Unmarried",mobile:"7896541230",email:"mannu967774@gmail.com",state:"Andhra Pradesh",city:"Visakhapatnam",presentAddress:"Noida",department:"Web Development",designation:".NET Developer",designationType:"Employee",joiningDate:"2026-01-20",reportingManager:"Admin",salary:1e4,status:"Active",yearOfExperience:0,qualifications:[{sno:1,degree:"B.Tech",institution:"ABC University",year:"2018",attachment:null},{sno:2,degree:"M.Tech",institution:"XYZ University",year:"2020",attachment:null}],bankName:"dgbdf",accountNumber:"7988964561521",ifsc:"987948456656",pan:"POKPS6483E",panAttachment:null,aadhaar:"574861577125",aadhaarAttachment:null,passport:null,passportAttachment:null,previousEmployer:null,previousFrom:null,previousTo:null};constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["app-employee-details"]],standalone:!1,decls:152,vars:30,consts:[["noQualifications",""],[1,"p-5","bg-gray-50","rounded-xl","shadow-sm","max-w-7xl","mx-auto"],[1,"flex","justify-between","items-center","mb-6","border-b","pb-3"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-full","object-cover","border","border-gray-300",3,"src","alt"],[1,"text-2xl","font-bold","text-black"],[1,"inline-flex","items-center","gap-1","px-3","py-1","text-xs","font-semibold","rounded-full","bg-green-100","text-green-700","border","border-green-200"],[1,"fa-solid","fa-circle-check"],[1,"bg-white","border","border-gray-200","rounded-lg","p-5","mb-6"],[1,"text-black","font-semibold","mb-4","flex","items-center","gap-2"],[1,"fa-solid","fa-id-card","text-blue-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"fa-solid","fa-user","text-blue-300","mt-1"],[1,"text-gray-400","text-xs"],[1,"font-medium","text-gray-700"],[1,"fa-solid","fa-calendar","text-green-300","mt-1"],[1,"fa-solid","fa-phone","text-indigo-300","mt-1"],[1,"fa-solid","fa-envelope","text-yellow-300","mt-1"],[1,"fa-solid","fa-venus-mars","text-purple-300","mt-1"],[1,"fa-solid","fa-house","text-pink-300","mt-1"],[1,"fa-solid","fa-building","text-blue-300","mt-1"],[1,"fa-solid","fa-briefcase","text-green-300","mt-1"],[1,"fa-solid","fa-calendar-check","text-indigo-300","mt-1"],[1,"fa-solid","fa-money-bill-wave","text-purple-300","mt-1"],[1,"fa-solid","fa-user-tie","text-yellow-300","mt-1"],[1,"fa-solid","fa-briefcase","text-pink-300","mt-1"],[1,"fa-solid","fa-university","text-green-500"],[1,"fa-solid","fa-building-columns","text-blue-300","mt-1"],[1,"fa-solid","fa-credit-card","text-purple-300","mt-1"],[1,"fa-solid","fa-id-card","text-green-300","mt-1"],["target","_blank","class","text-blue-600 hover:underline text-xs",3,"href",4,"ngIf"],[1,"fa-solid","fa-address-card","text-yellow-300","mt-1"],[1,"fa-solid","fa-building","text-indigo-500"],[1,"text-xs","text-gray-500"],[1,"fa-solid","fa-graduation-cap","text-blue-500"],["class","grid grid-cols-1 gap-3",4,"ngIf","ngIfElse"],["target","_blank",1,"text-blue-600","hover:underline","text-xs",3,"href"],[1,"grid","grid-cols-1","gap-3"],[4,"ngFor","ngForOf"],[1,"text-sm","font-medium"],["target","_blank","class","text-blue-600 text-xs hover:underline",3,"href",4,"ngIf"],["target","_blank",1,"text-blue-600","text-xs","hover:underline",3,"href"],[1,"text-gray-400","text-sm"]],template:function(t,o){if(t&1&&(i(0,"div",1)(1,"div",2)(2,"div",3),s(3,"img",4),i(4,"h1",5),r(5),n()(),i(6,"span",6),s(7,"i",7),r(8),n()(),i(9,"div",8)(10,"h2",9),s(11,"i",10),r(12," Personal & Professional Details "),n(),i(13,"div",11)(14,"div",3),s(15,"i",12),i(16,"div")(17,"p",13),r(18,"Employee Code"),n(),i(19,"p",14),r(20),n()()(),i(21,"div",3),s(22,"i",15),i(23,"div")(24,"p",13),r(25,"Date of Birth"),n(),i(26,"p",14),r(27),n()()(),i(28,"div",3),s(29,"i",16),i(30,"div")(31,"p",13),r(32,"Mobile"),n(),i(33,"p",14),r(34),n()()(),i(35,"div",3),s(36,"i",17),i(37,"div")(38,"p",13),r(39,"Email"),n(),i(40,"p",14),r(41),n()()(),i(42,"div",3),s(43,"i",18),i(44,"div")(45,"p",13),r(46,"Gender"),n(),i(47,"p",14),r(48),n()()(),i(49,"div",3),s(50,"i",19),i(51,"div")(52,"p",13),r(53,"Address"),n(),i(54,"p",14),r(55),n()()(),i(56,"div",3),s(57,"i",20),i(58,"div")(59,"p",13),r(60,"Department"),n(),i(61,"p",14),r(62),n()()(),i(63,"div",3),s(64,"i",21),i(65,"div")(66,"p",13),r(67,"Designation"),n(),i(68,"p",14),r(69),n()()(),i(70,"div",3),s(71,"i",22),i(72,"div")(73,"p",13),r(74,"Joining Date"),n(),i(75,"p",14),r(76),n()()(),i(77,"div",3),s(78,"i",23),i(79,"div")(80,"p",13),r(81,"Salary"),n(),i(82,"p",14),r(83),B(84,"currency"),n()()(),i(85,"div",3),s(86,"i",24),i(87,"div")(88,"p",13),r(89,"Reporting Manager"),n(),i(90,"p",14),r(91),n()()(),i(92,"div",3),s(93,"i",25),i(94,"div")(95,"p",13),r(96,"Years of Experience"),n(),i(97,"p",14),r(98),n()()()()(),i(99,"div",8)(100,"h2",9),s(101,"i",26),r(102," Bank & Identity "),n(),i(103,"div",11)(104,"div",3),s(105,"i",27),i(106,"div")(107,"p",13),r(108,"Bank Name"),n(),i(109,"p",14),r(110),n()()(),i(111,"div",3),s(112,"i",28),i(113,"div")(114,"p",13),r(115,"Account Number"),n(),i(116,"p",14),r(117),n()()(),i(118,"div",3),s(119,"i",29),i(120,"div")(121,"p",13),r(122,"PAN"),n(),i(123,"p",14),r(124),n(),p(125,Zn,2,1,"a",30),n()(),i(126,"div",3),s(127,"i",31),i(128,"div")(129,"p",13),r(130,"Aadhaar"),n(),i(131,"p",14),r(132),n(),p(133,ea,2,1,"a",30),n()()()(),i(134,"div",8)(135,"h2",9),s(136,"i",32),r(137," Previous Employment "),n(),i(138,"div")(139,"p",13),r(140,"Employer"),n(),i(141,"p",14),r(142),n(),i(143,"p",33),r(144),n()()(),i(145,"div",8)(146,"h2",9),s(147,"i",34),r(148," Qualifications "),n(),p(149,na,2,1,"div",35)(150,aa,2,0,"ng-template",null,0,Oe),n()()),t&2){let m=fe(151);l(3),xt("alt",o.employee==null?null:o.employee.name),d("src",(o.employee==null?null:o.employee.panAttachment)||"assets/default-profile.png",De),l(2),u((o.employee==null?null:o.employee.name)||"\u2014"),l(3),v(" ",(o.employee==null?null:o.employee.status)||"\u2014"," "),l(12),u((o.employee==null?null:o.employee.empCode)||"\u2014"),l(7),u((o.employee==null?null:o.employee.dob)||"\u2014"),l(7),u((o.employee==null?null:o.employee.mobile)||"\u2014"),l(7),u((o.employee==null?null:o.employee.email)||"\u2014"),l(7),u((o.employee==null?null:o.employee.gender)||"\u2014"),l(7),u((o.employee==null?null:o.employee.presentAddress)||"\u2014"),l(7),u((o.employee==null?null:o.employee.department)||"\u2014"),l(7),u((o.employee==null?null:o.employee.designation)||"\u2014"),l(7),u((o.employee==null?null:o.employee.joiningDate)||"\u2014"),l(7),u(o.employee!=null&&o.employee.salary?$(84,27,o.employee.salary,"INR"):"\u2014"),l(8),u((o.employee==null?null:o.employee.reportingManager)||"\u2014"),l(7),v(" ",(o.employee==null?null:o.employee.yearOfExperience)!==null?o.employee.yearOfExperience+" years":"\u2014"," "),l(12),u((o.employee==null?null:o.employee.bankName)||"\u2014"),l(7),u((o.employee==null?null:o.employee.accountNumber)||"\u2014"),l(7),u((o.employee==null?null:o.employee.pan)||"\u2014"),l(),d("ngIf",o.employee==null?null:o.employee.panAttachment),l(7),u((o.employee==null?null:o.employee.aadhaar)||"\u2014"),l(),d("ngIf",o.employee==null?null:o.employee.aadhaarAttachment),l(9),u((o.employee==null?null:o.employee.previousEmployer)||"\u2014"),l(2),ht(" ",(o.employee==null?null:o.employee.previousFrom)||"\u2014"," - ",(o.employee==null?null:o.employee.previousTo)||"\u2014"," "),l(5),d("ngIf",o.employee==null||o.employee.qualifications==null?null:o.employee.qualifications.length)("ngIfElse",m)}},dependencies:[I,k,_t],encapsulation:2})};var oa=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"employee-task-sheet",component:Be},{path:"dashboard",component:ze},{path:"employee-list",component:qe},{path:"edit-employee/:id",component:Lt},{path:"assign-leave",component:Ie},{path:"upload-attendance",component:Ue},{path:"view-attendance",component:He},{path:"assign-leave",component:Ie},{path:"assigned-employees-leaves",component:$e},{path:"add-task",component:Ge},{path:"view-task",component:Ye},{path:"view-project",component:Ze},{path:"add-project",component:We},{path:"leave-requests",component:tt},{path:"master",loadChildren:()=>import("./chunk-426N773Y.js").then(a=>a.MastersModule)},{path:"project-details",component:qt},{path:"employee-details",component:it}],nt=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Le({type:a});static \u0275inj=Ae({imports:[at.forChild(oa),at]})};var Jt=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Le({type:a});static \u0275inj=Ae({providers:[K],imports:[Ct,kt,nt,Pt,jt,Ot,Vt,Rt,Bt,Mt,Ut]})};export{Jt as AdminModule};
