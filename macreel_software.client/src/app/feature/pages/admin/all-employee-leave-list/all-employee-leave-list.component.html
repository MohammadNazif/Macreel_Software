<!-- ================= PANEL HEADER ================= -->
<div class="panel-header panel-header-sm"></div>

<!-- ================= CONTENT ================= -->
<div class="content px-2 sm:px-4 py-2">

  <!-- ================= HEADER + SEARCH + PAGINATOR ================= -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 w-full mb-2">

    <!-- HEADING -->
    <h1 class="text-lg md:text-[16px] font-semibold text-[#444] text-center md:text-left md:flex-1">
      Leave List
    </h1>

    <!-- SEARCH + PAGINATOR -->
    <div class="flex flex-col sm:flex-row items-center gap-2 w-full md:w-auto">

      <!-- SEARCH INPUT -->
      <div class="relative w-full sm:w-48 md:w-64">
        <input type="text" placeholder="Search employee..." (input)="onSearchChange($event)"
          class="w-full pl-10 pr-3 py-[6px] text-[12px] md:text-[14px] rounded-lg bg-[#F6F7FB] border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#C5192F] table-search" />
        <i
          class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-[12px] md:text-[14px]"></i>
      </div>

      <!-- PAGINATOR -->
      <mat-paginator [length]="totalRecords" [pageSize]="pageSize" [pageSizeOptions]="[20,50,100]"
        aria-label="Select page" showFirstLastButtons (page)="onPageChange($event)">
      </mat-paginator>

    </div>
  </div>

  <!-- ================= TABLE ================= -->
  <div class="bg-white shadow rounded-lg w-full overflow-x-auto max-h-[70vh]">

    <!-- table wrapper to prevent dashboard shrink -->
    <div class="min-w-max">
      <table mat-table [dataSource]="dataSource"
        class="w-full border border-gray-300 divide-y divide-gray-300 table-fixed text-sm md:text-base">

        <!-- Sr No -->
        <ng-container matColumnDef="srNo">
          <th mat-header-cell *matHeaderCellDef
            class="w-[50px] md:w-[70px] px-1 py-1 text-center !bg-[#dd3d4f] text-white whitespace-nowrap">
            Sr No.
          </th>
          <td mat-cell *matCellDef="let element; let i = index" class="px-1 py-1 text-center border-r">
            {{ i + 1 }}
          </td>
        </ng-container>

        <!-- Emp Code -->
        <ng-container matColumnDef="empCode">
          <th mat-header-cell *matHeaderCellDef class="min-w-[100px] px-1 py-1 !bg-[#dd3d4f] text-white">
            Emp Code
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            {{ element.empCode }}
          </td>
        </ng-container>

        <!-- Name -->
        <ng-container matColumnDef="empName">
          <th mat-header-cell *matHeaderCellDef class="min-w-[200px] px-1 py-1 !bg-[#dd3d4f] text-white">
            Name
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            {{ element.empName }}
          </td>
        </ng-container>

        <!-- Designation -->
        <ng-container matColumnDef="designation">
          <th mat-header-cell *matHeaderCellDef class="min-w-[150px] px-1 py-1 !bg-[#dd3d4f] text-white">
            Designation
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            {{ element.designationName }}
          </td>
        </ng-container>

        <!-- CL / EL / SL / CF Columns -->
        <ng-container matColumnDef="CL">
          <th mat-header-cell *matHeaderCellDef class="min-w-[160px] px-1 py-1 !bg-[#dd3d4f] text-white border-r">
            <div class="text-center font-semibold text-[12px] md:text-[14px]">CL</div>
            <div class="grid grid-cols-2 text-[11px] md:text-[12px] border-white">
              <div class="text-center">Total</div>
              <div class="text-center">Remaining</div>
            </div>
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            <div class="grid grid-cols-2 text-[12px] md:text-[14px]">
              <div class="text-center px-2 md:px-3 border-r">{{ element.clTotal || 0 }}</div>
              <div class="text-center px-2 md:px-3">{{ element.clRemaining || 0 }}</div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="EL">
          <th mat-header-cell *matHeaderCellDef class="min-w-[160px] px-1 py-1 !bg-[#dd3d4f] text-white border-r">
            <div class="text-center font-semibold text-[12px] md:text-[14px]">EL</div>
            <div class="grid grid-cols-2 text-[11px] md:text-[12px]">
              <div class="text-center border-white">Total</div>
              <div class="text-center">Remaining</div>
            </div>
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            <div class="grid grid-cols-2 text-[12px] md:text-[14px]">
              <div class="text-center px-2 md:px-3">{{ element.elTotal || 0 }}</div>
              <div class="text-center px-2 md:px-3">{{ element.elRemaining || 0 }}</div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="SL">
          <th mat-header-cell *matHeaderCellDef class="min-w-[160px] px-1 py-1 !bg-[#dd3d4f] text-white border-r">
            <div class="text-center font-semibold text-[12px] md:text-[14px]">SL</div>
            <div class="grid grid-cols-2 text-[11px] md:text-[12px]">
              <div class="text-center px-2">Total</div>
              <div class="text-center px-2">Remaining</div>
            </div>
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center border-r">
            <div class="grid grid-cols-2 text-[12px] md:text-[14px]">
              <div class="text-center px-2 md:px-3">{{ element.slTotal || 0 }}</div>
              <div class="text-center px-2 md:px-3">{{ element.slRemaining || 0 }}</div>
            </div>
          </td>
        </ng-container>

        <!-- <ng-container matColumnDef="CF">
          <th mat-header-cell *matHeaderCellDef class="min-w-[160px] px-1 py-1 !bg-[#dd3d4f] text-white">
            <div class="text-center font-semibold text-[12px] md:text-[14px]">CF</div>
            <div class="text-center text-[11px] md:text-[12px]">Carry Forward</div>
          </th>
          <td mat-cell *matCellDef="let element" class="px-2 py-1 text-center">
            {{ element.elCarryForward || 0 }}
          </td>
        </ng-container> -->

        <ng-container matColumnDef="CF">
          <th mat-header-cell *matHeaderCellDef class="min-w-[160px] px-1 py-1 !bg-[#dd3d4f] text-white">
            <div class="text-center font-semibold text-[12px] md:text-[14px]">CO</div>
            <div class="text-center text-[11px] md:text-[12px]">Carry Over</div>
          </th>
          <td mat-cell *matCellDef="let element" class="px-1 py-1">
            <div class="flex justify-center">
              {{ element.elCarryForward || 0 }}
            </div>
          </td>
        </ng-container>


        <!-- ROWS -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="!h-9"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-100 !h-9"></tr>

      </table>
    </div>

  </div>
</div>