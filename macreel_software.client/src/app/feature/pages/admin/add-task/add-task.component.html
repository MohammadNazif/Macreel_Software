<div
  class="max-w-5xl mx-auto bg-white shadow-xl rounded-xl pt-3 py-10 p-6 mt-2"
>
  <!-- Header -->
  <h2
    class="text-sm font-semibold text-gray-700 mb-1 border-b border-gray-200 pb-2"
  >
    Add Task
  </h2>

  <form [formGroup]="taskForm" (ngSubmit)="submit()" class="space-y-4">
    <!-- Row 1: SR No + Task Title -->
    <div class="grid grid-cols-1 md:grid-cols-1">
      <div class="flex flex-col w-full">
        <label class="text-gray-500 text-sm mb-1">Task Title</label>
        <input
          type="text"
          formControlName="title"
          placeholder="Enter task title"
          class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 text-gray-700 focus:ring-1 focus:ring-[#dd3d4f] focus:outline-none"
        />
      </div>
    </div>

    <!-- Row 2: Assign Employee + Completion Date -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mt-1">
      <div class="flex flex-col w-full">
        <label class="text-gray-500 text-sm mb-1">Assign Employee</label>
        <select
          formControlName="employee"
          class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 text-gray-700 focus:ring-1 focus:ring-[#dd3d4f] focus:outline-none"
        >
          <option value="">Select Employee</option>
          <option *ngFor="let emp of employees" [ngValue]="emp">
            {{ emp.empName }}
          </option>
        </select>
      </div>

      <div class="flex flex-col w-full">
        <label class="text-gray-500 text-sm mb-1">Completion Date</label>
        <input
          type="date"
          formControlName="completionDate"
          class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 text-gray-700 focus:ring-1 focus:ring-[#dd3d4f] focus:outline-none"
        />
      </div>
    </div>

    <!-- Description -->
    <div class="flex flex-col">
      <label class="text-gray-500 text-sm mb-1">Description</label>
      <textarea
        rows="3"
        formControlName="description"
        placeholder="Enter task description"
        class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 text-gray-700 focus:ring-1 focus:ring-[#dd3d4f] focus:outline-none"
      ></textarea>
    </div>

    <!-- Auto reassign same task -->
    <div class="grid grid-cols-2 items-center mt-2 w-full gap-4">
      <!-- LEFT SIDE -->
      <label class="flex items-center text-sm text-gray-700 cursor-pointer">
        <input
          type="checkbox"
          formControlName="autoReassign"
          class="w-4 h-4 text-[#dd3d4f] border-gray-300 rounded focus:ring-[#dd3d4f]"
        />
        <span class="ml-2 whitespace-nowrap"> Auto re-assign same task ? </span>
      </label>

      <!-- RIGHT SIDE -->
      <div
        *ngIf="taskForm.get('autoReassign')?.value"
        class="flex flex-col items-start w-full"
      >
        <label class="text-gray-600 text-xs mb-1"> Select Time Duration </label>

        <select
          formControlName="reassignDuration"
          class="w-full max-w-sm px-3 py-2 rounded-lg border border-gray-300 bg-white text-gray-700 text-sm"
        >
          <option value="" disabled>-- Select Time Period --</option>
          <option value="7">7 Days</option>
          <option value="15">15 Days</option>
          <option value="30">1 Month</option>
        </select>
      </div>
    </div>

    <!-- Drag & Drop Attachments -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Attachment 1 -->
      <div
        class="flex flex-col items-center justify-center h-20 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-[#dd3d4f] hover:bg-gray-50 transition-all duration-150"
        (dragover)="onDragOver($event)"
        (drop)="onFileDrop($event, 1)"
        (click)="fileInput1.click()"
      >
        <p class="text-gray-400 text-sm text-center">
          {{ attachment1?.name || "Drag & Drop or Click Attachment 1" }}
        </p>
        <input
          type="file"
          #fileInput1
          (change)="onFileSelect($event, 1)"
          hidden
        />
      </div>

      <!-- Attachment 2 -->
      <div
        class="flex flex-col items-center justify-center h-20 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-[#dd3d4f] hover:bg-gray-50 transition-all duration-150"
        (dragover)="onDragOver($event)"
        (drop)="onFileDrop($event, 2)"
        (click)="fileInput2.click()"
      >
        <p class="text-gray-400 text-sm text-center">
          {{ attachment2?.name || "Drag & Drop or Click Attachment 2" }}
        </p>
        <input
          type="file"
          #fileInput2
          (change)="onFileSelect($event, 2)"
          hidden
        />
      </div>
    </div>

    <!--Status for task update-->
    <div *ngIf="editTask" class="mb-4">
      <label class="block text-sm font-medium text-gray-600 mb-1">Status</label>
      <select
        formControlName="adminstatus"
        class="w-96 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#C5192F]"
      >
        <option value="" disabled>Select Status</option>
        <option value="1">Completed</option>
        <option value="0">No Response</option>
      </select>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-end">
      <button
        type="submit"
        class="bg-[#dd3d4f] hover:bg-red-600 text-white font-medium px-6 py-2 rounded-lg shadow-md transition-all"
      >
        Submit Task
      </button>
    </div>
  </form>
</div>
