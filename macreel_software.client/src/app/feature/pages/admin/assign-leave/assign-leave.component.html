<div class="p-2 bg-gray-100 min-h-screen">

  <!-- CARD 1: Select Employee -->
<div class="bg-white shadow-lg rounded-xl mb-2 border border-gray-200">

  <!-- HEADER -->
  <div class="!bg-[#dd3d4f] text-white p-2 rounded-t-xl">
    <h5 class="font-semibold text-sm tracking-wide">
      Assign Leave
    </h5>
  </div>

  <div class="p-2 space-y-4">

    <!-- ROW 1: SELECT EMPLOYEE -->
    <div class="grid grid-cols-12 items-center gap-4">
      <div class="col-span-12 md:col-span-2 font-semibold text-sm text-gray-700">
        Employee Name
      </div>

      <div class="col-span-12 md:col-span-6">
        <select 
          [(ngModel)]="selectedEmployeeId" 
          (change)="onEmployeeChange()" 
          class="w-full border border-gray-300 rounded-lg p-2.5 text-sm 
                 focus:outline-none focus:ring-2 focus:ring-[#C5192F]">
          <option [ngValue]="null">-- Select Employee --</option>
          <option *ngFor="let emp of employees" [ngValue]="emp.id">
            {{ emp.empName }}
          </option>
        </select>
      </div>
    </div>

    <!-- ROW 2: EMPLOYEE DETAILS (ONLY SHOW WHEN SELECTED) -->
    <div *ngIf="selectedEmployee" 
         class="mt-3 p-2 border border-gray-200 rounded-lg bg-gray-50">

      <h6 class="font-semibold text-[14px] text-[#dd3d4f] mb-2">
        Employee Details
      </h6>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-gray-700">
        <div><strong>Employee Code:</strong> {{ selectedEmployee.empCode }}</div>
        <!-- <div><strong>Name:</strong> {{ selectedEmployee.empName }}</div> -->
        <div><strong>Designation:</strong> {{ selectedEmployee.designationName }}</div>
        <div><strong>Contact No:</strong> {{ selectedEmployee.mobile }}</div>
        <div><strong>Email Id:</strong> {{ selectedEmployee.emailId }}</div>
        <div>
          <strong>Date of Joining:</strong>
          {{ selectedEmployee.dateOfJoining | date:'dd-MM-yyyy' }}
        </div>
      </div>
    </div>

  </div>
</div>


  <!-- CARD 3: Leave Table -->
  <div *ngIf="selectedEmployee" class="bg-white shadow-lg rounded-xl border border-gray-200 overflow-x-auto">

    <!-- PAGINATOR -->
    <div class="flex justify-end ">
      <mat-paginator [length]="totalRecords" [pageSize]="pageSize" [pageSizeOptions]="[10,25,50]"
        (page)="onPageChange($event)">
      </mat-paginator>
    </div>

    <table mat-table [dataSource]="dataSource" class="min-w-[700px] w-full
           border border-gray-300
           divide-y divide-gray-300
           table-fixed
           text-sm md:text-base">

      <!-- CHECKBOX -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef
          class=" px-1 py-1 text-center !bg-[#dd3d4f] text-white text-[14px]">
          Select
        </th>
        <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center">
          <input type="checkbox" [(ngModel)]="element.isSelected" class="w-4 h-4 accent-green-600">
        </td>
      </ng-container>


      <!-- NO OF LEAVE -->
      <ng-container matColumnDef="noOfLeave">
        <th mat-header-cell *matHeaderCellDef class="px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]">
          No Of Leave
        </th>
        <td mat-cell *matCellDef="let element" class="px-1 py-1 text-center">
          <input type="number" [(ngModel)]="element.noOfLeave"
            class="border border-gray-300 rounded p-1.5 w-[55px] h-[25px] text-center text-[12px]">
        </td>
      </ng-container>

      <!-- LEAVE NAME -->
      <ng-container matColumnDef="leaveName">
        <th mat-header-cell *matHeaderCellDef class="px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]">
          Type Of Leave
        </th>
        <td mat-cell *matCellDef="let element" class="px-1 py-1 text-[12px] m-[2]">
          {{ element.leaveName }}
        </td>
      </ng-container>

      <!-- DESCRIPTION -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef class="px-1 py-1 !bg-[#dd3d4f] text-white text-[14px]">
          Description
        </th>
        <td mat-cell *matCellDef="let element" class="px-1 py-1 text-[12px]">
          {{ element.description }}
        </td>
      </ng-container>

      <!-- HEADER ROW -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns" class="!h-9"></tr>

      <!-- DATA ROW -->
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-100 !h-9"></tr>

    </table>

    <div class="flex justify-end p-2">
      <button (click)="submitAssignedLeave()"
        class="!bg-[#dd3d4f] text-white px-8 py-2.5 rounded-lg font-semibold text-[12px] hover:bg-green-700">
        Submit
      </button>
    </div>

  </div>

</div>